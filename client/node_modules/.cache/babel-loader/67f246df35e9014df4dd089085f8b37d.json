{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Link}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import axios from\"axios\";import Modal from\"react-modal\";import\"./Addpromotion.css\";import{AnimatePresence,motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var customStyles={content:{width:\"100%\",top:\"50%\",left:\"50%\",right:\"auto\",bottom:\"auto\",marginRight:\"-50%\",transform:\"translate(-50%, -50%)\"}};function Addpromotion(option){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),product_name=_useState4[0],setProductName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),product_code=_useState6[0],setProductCode=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),picture=_useState8[0],setPicture=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),amount_point=_useState12[0],setAmount_Point=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),expired=_useState14[0],setExpired=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),productlist=_useState16[0],setProductlist=_useState16[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalIsOpen1=_React$useState2[0],setIsOpen1=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),modalIsOpen2=_React$useState4[0],setIsOpen2=_React$useState4[1];//---------------------------------------------------\nvar addpromotionpoint=function addpromotionpoint(){axios.post(\"/postpromotionpoint\",{product_name:product_name,product_code:product_code,amount:amount_point,picture:picture,category:category,expired:expired}).then(function(response){if(response.data.message){alert(response.data.message);history.go();}});};var addpromotion=function addpromotion(){axios.post(\"/postpromotion\",{product_name:product_name,product_code:product_code,amount:amount_point,picture:picture,category:category}).then(function(response){if(response.data.message){alert(response.data.message);history.go();}});};/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:\"-100vh\"}};/* ********************************** */function openModal(product_name,product_code,picture,category){setProductName(product_name);setProductCode(product_code);setPicture(picture);setCategory(category);if(option.location.pathname===\"/addpromotion/option1\"){setIsOpen1(true);}else if(option.location.pathname===\"/addpromotion/option2\"){setIsOpen2(true);}}function afterOpenModal(){// references are now sync'd and can be accessed.\n}function closeModal(){setIsOpen1(false);setIsOpen2(false);}//---------------------------------------------------\nuseEffect(function(){axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){setName(response.data.user[0].name);axios.get(\"/getproduct\").then(function(response){if(response.data){setProductlist(response.data);console.log(response.data);}});}if(response.data.loggedIn===false||response.data.user[0].role!==\"shop\"){return history.push(\"/login\");}});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/myshop\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"addpromotionModal1\",children:/*#__PURE__*/_jsx(Modal,{isOpen:modalIsOpen1,onAfterOpen:afterOpenModal,onRequestClose:closeModal,style:customStyles,contentLabel:\"Example Modal\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},children:[/*#__PURE__*/_jsx(\"div\",{className:\"toppic-promotin\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"h2promotionmember\",children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-showproduct-detail\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"showproduct-detail\",children:[\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",product_code]}),/*#__PURE__*/_jsxs(\"p\",{className:\"showproduct-detail\",children:[\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",product_code]}),/*#__PURE__*/_jsxs(\"p\",{className:\"showproduct-detail\",children:[\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48 : \",category]})]}),/*#__PURE__*/_jsx(\"label\",{className:\"label-showproduct-detail\",children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E0A\\u0E34\\u0E49\\u0E19\\u0E19\\u0E35\\u0E49\"}),/*#__PURE__*/_jsx(\"div\",{className:\"divaddpromotionpoint-1\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-showproduct-detail\",type:\"number\",placeholder:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E0A\\u0E34\\u0E49\\u0E19\\u0E19\\u0E35\\u0E49\",onChange:function onChange(e){setAmount_Point(e.target.value);}})}),/*#__PURE__*/_jsx(\"label\",{className:\"label-showproduct-detail\",children:\"\\u0E27\\u0E31\\u0E19\\u0E2B\\u0E21\\u0E14\\u0E2D\\u0E32\\u0E22\\u0E38\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"divaddpromotionpoint-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-showproduct-detail\",type:\"date\",onChange:function onChange(e){setExpired(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"buttoncalculate-modal1\",onClick:addpromotionpoint,children:\"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"}),/*#__PURE__*/_jsx(\"button\",{className:\"buttoncalculate-modal2\",onClick:closeModal,children:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"})]})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"addpromotionModal2\",children:/*#__PURE__*/_jsx(Modal,{isOpen:modalIsOpen2,onAfterOpen:afterOpenModal,onRequestClose:closeModal,style:customStyles,contentLabel:\"Example Modal\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},children:[/*#__PURE__*/_jsx(\"div\",{className:\"toppic-promotin\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"h2promotionmember\",children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E41\\u0E25\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-showproduct-detail\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"showproduct-detail\",children:[\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",product_code]}),/*#__PURE__*/_jsxs(\"p\",{className:\"showproduct-detail\",children:[\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",product_code]}),/*#__PURE__*/_jsxs(\"p\",{className:\"showproduct-detail\",children:[\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48 : \",category]})]}),/*#__PURE__*/_jsx(\"label\",{className:\"label-showproduct-detail\",children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E17\\u0E35\\u0E48\\u0E43\\u0E0A\\u0E49\\u0E41\\u0E25\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E0A\\u0E34\\u0E49\\u0E19\\u0E19\\u0E35\\u0E49\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"divaddpromotionpoint-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-showproduct-detail\",type:\"number\",placeholder:\"0\",onChange:function onChange(e){setAmount_Point(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"buttoncalculate-modal1\",onClick:addpromotion,children:\"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"}),/*#__PURE__*/_jsx(\"button\",{className:\"buttoncalculate-modal2\",onClick:closeModal,children:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"})]})]})]})})}),/*#__PURE__*/_jsx(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:/*#__PURE__*/_jsx(\"div\",{className:\"top-addpromotion\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-addpromotion\",children:productlist.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"shopbox-addpromotin\",onClick:function onClick(){openModal(product.product_name,product.product_code,product.picture,product.category);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"shopbox-img\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid-shopbox\",src:product.picture,style:{height:\"100px\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"boxaddpromotion\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"p-addpromotion\",children:[\"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",product.product_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"p-addpromotion\",children:[\"\\u0E23\\u0E32\\u0E04\\u0E32 : \",product.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"p-addpromotion\",children:[\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48 : \",product.category]})]})]});})})})})]});}export default Addpromotion;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Addpromotion.js"],"names":["React","Link","useEffect","useState","useHistory","axios","Modal","AnimatePresence","motion","customStyles","content","width","top","left","right","bottom","marginRight","transform","Addpromotion","option","history","name","setName","product_name","setProductName","product_code","setProductCode","picture","setPicture","category","setCategory","amount_point","setAmount_Point","expired","setExpired","productlist","setProductlist","modalIsOpen1","setIsOpen1","modalIsOpen2","setIsOpen2","addpromotionpoint","post","amount","then","response","data","message","alert","go","addpromotion","pageTransition","in","opacity","x","out","openModal","location","pathname","afterOpenModal","closeModal","get","loggedIn","user","console","log","role","push","y","e","target","value","map","product","height","price"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport Modal from \"react-modal\";\r\nimport \"./Addpromotion.css\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\n\r\nconst customStyles = {\r\n  content: {\r\n    width: \"100%\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n  },\r\n};\r\n\r\nfunction Addpromotion(option) {\r\n  const history = useHistory();\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const [product_name, setProductName] = useState(\"\");\r\n  const [product_code, setProductCode] = useState(\"\");\r\n  const [picture, setPicture] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [amount_point, setAmount_Point] = useState();\r\n  const [expired, setExpired] = useState(\"\");\r\n\r\n  const [productlist, setProductlist] = useState([]);\r\n  const [modalIsOpen1, setIsOpen1] = React.useState(false);\r\n  const [modalIsOpen2, setIsOpen2] = React.useState(false);\r\n  //---------------------------------------------------\r\n  const addpromotionpoint = () => {\r\n    axios\r\n      .post(\"/postpromotionpoint\", {\r\n        product_name: product_name,\r\n        product_code: product_code,\r\n        amount: amount_point,\r\n        picture: picture,\r\n        category: category,\r\n        expired: expired,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.message) {\r\n          alert(response.data.message);\r\n          history.go();\r\n        }\r\n      });\r\n  };\r\n  const addpromotion = () => {\r\n    axios\r\n      .post(\"/postpromotion\", {\r\n        product_name: product_name,\r\n        product_code: product_code,\r\n        amount: amount_point,\r\n        picture: picture,\r\n        category: category,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.message) {\r\n          alert(response.data.message);\r\n          history.go();\r\n        }\r\n      });\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: \"-100vh\",\r\n\r\n    }\r\n  };\r\n\r\n\r\n  /* ********************************** */\r\n\r\n  function openModal(product_name, product_code, picture, category) {\r\n    setProductName(product_name);\r\n    setProductCode(product_code);\r\n    setPicture(picture);\r\n    setCategory(category);\r\n    if (option.location.pathname === \"/addpromotion/option1\") {\r\n      setIsOpen1(true);\r\n    } else if (option.location.pathname === \"/addpromotion/option2\") {\r\n      setIsOpen2(true);\r\n    }\r\n  }\r\n\r\n  function afterOpenModal() {\r\n    // references are now sync'd and can be accessed.\r\n  }\r\n\r\n  function closeModal() {\r\n    setIsOpen1(false);\r\n    setIsOpen2(false);\r\n  }\r\n\r\n  //---------------------------------------------------\r\n  useEffect(() => {\r\n    axios.get(\"/login\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        setName(response.data.user[0].name);\r\n        axios.get(\"/getproduct\").then((response) => {\r\n          if (response.data) {\r\n            setProductlist(response.data);\r\n            console.log(response.data);\r\n          }\r\n        });\r\n      }\r\n      if (\r\n        response.data.loggedIn === false ||\r\n        response.data.user[0].role !== \"shop\"\r\n      ) {\r\n        return history.push(\"/login\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/myshop\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <div className=\"addpromotionModal1\">\r\n        <Modal\r\n          isOpen={modalIsOpen1}\r\n          onAfterOpen={afterOpenModal}\r\n          onRequestClose={closeModal}\r\n          style={customStyles}\r\n          contentLabel=\"Example Modal\"\r\n        >\r\n           <motion.div initial={{ opacity: 0, y: 100 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 100 }}>\r\n          {/*แต่งไว้ที่ promotion*/}\r\n          <div className=\"toppic-promotin\">\r\n            <h2 className=\"h2promotionmember\">เพิ่มโปรโมชั่นคะแนน</h2>\r\n          </div>\r\n\r\n          <div className=\"div-showproduct-detail\">\r\n            <p className=\"showproduct-detail\">รหัสสินค้า : {product_code}</p>\r\n            <p className=\"showproduct-detail\">รหัสสินค้า : {product_code}</p>\r\n            <p className=\"showproduct-detail\">หมวดหมู่ : {category}</p>\r\n          </div>\r\n          <label className=\"label-showproduct-detail\">\r\n            จำนวนคะแนนสินค้าชิ้นนี้\r\n          </label>\r\n          <div className=\"divaddpromotionpoint-1\">\r\n            <input\r\n              className=\"input-showproduct-detail\"\r\n              type=\"number\"\r\n              placeholder=\"จำนวนคะแนนสินค้าชิ้นนี้\"\r\n              onChange={(e) => {\r\n                setAmount_Point(e.target.value);\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <label className=\"label-showproduct-detail\">\r\n            วันหมดอายุโปรโมชั่น\r\n          </label>\r\n          <div className=\"divaddpromotionpoint-1\">\r\n            <input\r\n              className=\"input-showproduct-detail\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                setExpired(e.target.value);\r\n              }}\r\n            />\r\n            <div>\r\n              <button\r\n                className=\"buttoncalculate-modal1\"\r\n                onClick={addpromotionpoint}\r\n              >\r\n                ยืนยัน\r\n              </button>\r\n              <button className=\"buttoncalculate-modal2\" onClick={closeModal}>\r\n                ยกเลิก\r\n              </button>\r\n            </div>\r\n          </div>\r\n          </motion.div>\r\n        </Modal>\r\n      </div>\r\n\r\n      <div className=\"addpromotionModal2\">\r\n        <Modal\r\n          isOpen={modalIsOpen2}\r\n          onAfterOpen={afterOpenModal}\r\n          onRequestClose={closeModal}\r\n          style={customStyles}\r\n          contentLabel=\"Example Modal\"\r\n        >\r\n           <motion.div initial={{ opacity: 0, y: 100 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 100 }}>\r\n          {/*แต่งไว้ที่ promotion*/}\r\n          <div className=\"toppic-promotin\">\r\n            <h2 className=\"h2promotionmember\">เพิ่มโปรโมชั่นแลกสินค้า</h2>\r\n          </div>\r\n\r\n          <div className=\"div-showproduct-detail\">\r\n            <p className=\"showproduct-detail\">รหัสสินค้า : {product_code}</p>\r\n            <p className=\"showproduct-detail\">รหัสสินค้า : {product_code}</p>\r\n            <p className=\"showproduct-detail\">หมวดหมู่ : {category}</p>\r\n          </div>\r\n\r\n          <label className=\"label-showproduct-detail\">\r\n            จำนวนคะแนนที่ใช้แลกสินค้าชิ้นนี้\r\n          </label>\r\n          <div className=\"divaddpromotionpoint-1\">\r\n            <input\r\n              className=\"input-showproduct-detail\"\r\n              type=\"number\"\r\n              placeholder=\"0\"\r\n              onChange={(e) => {\r\n                setAmount_Point(e.target.value);\r\n              }}\r\n            />\r\n            <div>\r\n              <button className=\"buttoncalculate-modal1\" onClick={addpromotion}>\r\n                ยืนยัน\r\n              </button>\r\n              <button className=\"buttoncalculate-modal2\" onClick={closeModal}>\r\n                ยกเลิก\r\n              </button>\r\n            </div>\r\n          </div>\r\n          </motion.div>\r\n        </Modal>\r\n      </div>\r\n      {/*--------------------------------------------------------------*/}\r\n\r\n      <motion.div initial=\"out\" animate=\"in\" exit=\"out\" variants={pageTransition}>\r\n      <div className=\"top-addpromotion\">\r\n        <div className=\"container-addpromotion\">\r\n          {productlist.map((product) => {\r\n            return (\r\n              <div\r\n                className=\"shopbox-addpromotin\"\r\n                onClick={() => {\r\n                  openModal(\r\n                    product.product_name,\r\n                    product.product_code,\r\n                    product.picture,\r\n                    product.category\r\n                  );\r\n                }}\r\n              >\r\n                {/*shopbox-img แต่งไว้ที่ promotionshop*/}\r\n                <div className=\"shopbox-img\">\r\n                  <img className=\"img-fluid-shopbox\" src={product.picture} style={{height : \"100px\"}} />\r\n                </div>\r\n                \r\n                <div className=\"boxaddpromotion\">\r\n                  <p className=\"p-addpromotion\">\r\n                    สินค้า : {product.product_name}\r\n                  </p>\r\n                  <p className=\"p-addpromotion\">ราคา : {product.price}</p>\r\n                  <p className=\"p-addpromotion\">\r\n                    หมวดหมู่ : {product.category}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Addpromotion;\r\n"]},"metadata":{},"sourceType":"module"}