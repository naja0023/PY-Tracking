{"ast":null,"code":"var _jsxFileName = \"D:\\\\login_and_register - Copy\\\\client\\\\src\\\\components\\\\Admin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './Admin.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport { Icon } from 'semantic-ui-react';\nimport { Loader } from 'semantic-ui-react';\nimport moment from 'moment';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport SideNav, { Toggle, Nav, NavItem, NavIcon, NavText } from '@trendmicro/react-sidenav'; // Be sure to include styles at some point, probably during your bootstraping\n\nimport '@trendmicro/react-sidenav/dist/react-sidenav.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Admin() {\n  _s();\n\n  const history = useHistory();\n  const location = useHistory();\n  const [active, setactive] = useState(true); //loader\n  //-------------------------------------------\n\n  const [name, setname] = useState('');\n  const [point, setpoint] = useState();\n  const [pendingpromotion, setpendingpromotion] = useState([]);\n  const [checkingTx, setcheckingTx] = useState([]);\n  const [keys, setkeys] = useState('');\n  axios.defaults.withCredentials = true; //-------------------------------------------\n\n  const logout = () => {\n    axios.get('/logout');\n    history.go(); //history.push(\"/\");\n  };\n\n  const acceptpromotion = (a, b, c, d, e, f, g, h) => {\n    axios.post('/acceptpromotionpoint', {\n      req_id: a,\n      shop_name: b,\n      product_name: c,\n      product_code: d,\n      amount_point: e,\n      picture: f,\n      category: g,\n      expired: h\n    }).then(response => {\n      if (response.data.message) {\n        alert(response.data.message);\n        history.go();\n      }\n    });\n  };\n\n  const disacceptpromotion = id => {\n    axios.put(`/disacceptpromotion/${id}`).then(response => {\n      if (response.data.message) {\n        alert(response.data.message);\n        history.go();\n      }\n    });\n  };\n\n  const checktransaction = () => {\n    axios.get('/checktransaction/' + keys).then(response => {\n      if (response) {\n        console.log(response.data);\n      }\n    });\n  };\n  /* ********************************** */\n\n\n  const pageTransition = {\n    in: {\n      opacity: 1,\n      x: 0\n    },\n    out: {\n      opacity: 0,\n      x: '-100vh'\n    }\n  };\n  /* ********************************** */\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setactive(false);\n      axios.get('/login').then(response => {\n        if (response.data.loggedIn === true && response.data.user[0].role === 'admin') {\n          setname(response.data.user[0].name);\n          setpoint(response.data.user[0].point);\n          axios.get('/getpromotionrequest').then(response => {\n            if (response.data) {\n              setpendingpromotion(response.data);\n            }\n          });\n        } else {\n          history.push('/login');\n        }\n      });\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"adminpage\",\n    children: [/*#__PURE__*/_jsxDEV(SideNav, {\n      style: {\n        background: 'black'\n      },\n      onSelect: selected => {\n        // Add your code here\n        const to = '/' + selected;\n\n        if (location.pathname !== to) {\n          history.push(to);\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(SideNav.Toggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SideNav.Nav, {\n        defaultSelected: \"home\",\n        children: [/*#__PURE__*/_jsxDEV(NavItem, {\n          eventKey: \"\",\n          children: [/*#__PURE__*/_jsxDEV(NavIcon, {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-fw fa-home\",\n              style: {\n                fontSize: '1.75em'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavText, {\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n          onClick: logout,\n          children: [/*#__PURE__*/_jsxDEV(NavIcon, {\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"log out\",\n              style: {\n                fontSize: '1.75em'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavText, {\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: \"out\",\n      animate: \"in\",\n      exit: \"out\",\n      variants: pageTransition,\n      children: [/*#__PURE__*/_jsxDEV(Loader, {\n        active: active\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"data-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h1-admin\",\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"h1-admin\",\n          children: [\"Hi \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"h1-admin\",\n          children: [\"point : \", point]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"table-wrapper-scroll-y my-custom-scrollbar\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            class: \"table table-bordered table-striped mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"request id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"shop name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"product name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"product code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"point\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"expired\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this), pendingpromotion.map(show => {\n              return /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.shop_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.product_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.product_code\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.amount_point\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: moment(show.expired).format('DD/MM/YYYY')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"buttoncalculate-modal1\",\n                      onClick: () => {\n                        acceptpromotion(show.id, show.shop_name, show.product_name, show.product_code, show.amount_point, show.picture, show.category, show.expired);\n                      },\n                      children: \"\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"buttoncalculate-modal2\",\n                      onClick: () => {\n                        disacceptpromotion(show.id);\n                      },\n                      children: \"\\u0E44\\u0E21\\u0E48\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Tx-id \\u0E2B\\u0E23\\u0E37\\u0E2D \\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\",\n          onChange: e => {\n            setkeys(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: checktransaction(keys),\n          children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Admin, \"qDWWT9HhIq0AklxTaCsuLH1SvEg=\", false, function () {\n  return [useHistory, useHistory];\n});\n\n_c = Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Admin.js"],"names":["React","useEffect","axios","useState","useHistory","Icon","Loader","moment","AnimatePresence","motion","SideNav","Toggle","Nav","NavItem","NavIcon","NavText","Admin","history","location","active","setactive","name","setname","point","setpoint","pendingpromotion","setpendingpromotion","checkingTx","setcheckingTx","keys","setkeys","defaults","withCredentials","logout","get","go","acceptpromotion","a","b","c","d","e","f","g","h","post","req_id","shop_name","product_name","product_code","amount_point","picture","category","expired","then","response","data","message","alert","disacceptpromotion","id","put","checktransaction","console","log","pageTransition","in","opacity","x","out","timer","setTimeout","loggedIn","user","role","push","clearTimeout","background","selected","to","pathname","fontSize","map","show","format","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport './Admin.css'\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport { Icon } from 'semantic-ui-react'\r\nimport { Loader } from 'semantic-ui-react'\r\nimport moment from 'moment'\r\nimport { AnimatePresence, motion } from 'framer-motion'\r\n\r\nimport SideNav, {\r\n  Toggle,\r\n  Nav,\r\n  NavItem,\r\n  NavIcon,\r\n  NavText,\r\n} from '@trendmicro/react-sidenav'\r\n\r\n// Be sure to include styles at some point, probably during your bootstraping\r\nimport '@trendmicro/react-sidenav/dist/react-sidenav.css'\r\n\r\nexport default function Admin() {\r\n  const history = useHistory()\r\n  const location = useHistory()\r\n  const [active, setactive] = useState(true) //loader\r\n  //-------------------------------------------\r\n  const [name, setname] = useState('')\r\n  const [point, setpoint] = useState()\r\n  const [pendingpromotion, setpendingpromotion] = useState([])\r\n  const [checkingTx, setcheckingTx] = useState([])\r\n  const [keys, setkeys] = useState('')\r\n  axios.defaults.withCredentials = true\r\n  //-------------------------------------------\r\n  const logout = () => {\r\n    axios.get('/logout')\r\n    history.go()\r\n    //history.push(\"/\");\r\n  }\r\n\r\n  const acceptpromotion = (a, b, c, d, e, f, g, h) => {\r\n    axios\r\n      .post('/acceptpromotionpoint', {\r\n        req_id: a,\r\n        shop_name: b,\r\n        product_name: c,\r\n        product_code: d,\r\n        amount_point: e,\r\n        picture: f,\r\n        category: g,\r\n        expired: h,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.message) {\r\n          alert(response.data.message)\r\n          history.go()\r\n        }\r\n      })\r\n  }\r\n\r\n  const disacceptpromotion = (id) => {\r\n    axios.put(`/disacceptpromotion/${id}`).then((response) => {\r\n      if (response.data.message) {\r\n        alert(response.data.message)\r\n        history.go()\r\n      }\r\n    })\r\n  }\r\n\r\n  const checktransaction = () => {\r\n    axios.get('/checktransaction/' + keys).then((response) => {\r\n      if (response) {\r\n        console.log(response.data)\r\n      }\r\n    })\r\n  }\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: '-100vh',\r\n    },\r\n  }\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false)\r\n      axios.get('/login').then((response) => {\r\n        if (\r\n          response.data.loggedIn === true &&\r\n          response.data.user[0].role === 'admin'\r\n        ) {\r\n          setname(response.data.user[0].name)\r\n          setpoint(response.data.user[0].point)\r\n          axios.get('/getpromotionrequest').then((response) => {\r\n            if (response.data) {\r\n              setpendingpromotion(response.data)\r\n            }\r\n          })\r\n        } else {\r\n          history.push('/login')\r\n        }\r\n      })\r\n    }, 2000)\r\n    return () => clearTimeout(timer)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"adminpage\">\r\n      <SideNav\r\n        style={{ background: 'black' }}\r\n        onSelect={(selected) => {\r\n          // Add your code here\r\n          const to = '/' + selected\r\n          if (location.pathname !== to) {\r\n            history.push(to)\r\n          }\r\n        }}\r\n      >\r\n        <SideNav.Toggle />\r\n        <SideNav.Nav defaultSelected=\"home\">\r\n          <NavItem eventKey=\"\">\r\n            <NavIcon>\r\n              <i className=\"fa fa-fw fa-home\" style={{ fontSize: '1.75em' }} />\r\n            </NavIcon>\r\n            <NavText>Home</NavText>\r\n          </NavItem>\r\n          <NavItem onClick={logout}>\r\n            <NavIcon>\r\n              <Icon name=\"log out\" style={{ fontSize: '1.75em' }} />\r\n            </NavIcon>\r\n            <NavText>Logout</NavText>\r\n          </NavItem>\r\n        </SideNav.Nav>\r\n      </SideNav>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <Loader active={active} />\r\n        <div className=\"data-container\">\r\n          <h1 className=\"h1-admin\">Admin</h1>\r\n          <h2 className=\"h1-admin\">Hi {name}</h2>\r\n          <h2 className=\"h1-admin\">point : {point}</h2>\r\n\r\n          <div class=\"table-wrapper-scroll-y my-custom-scrollbar\">\r\n            <table class=\"table table-bordered table-striped mb-0\">\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    request id\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    shop name\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    product name\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    product code\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    point\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    category\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    expired\r\n                  </th>\r\n                  <th className=\"th-table\" scope=\"col\">\r\n                    ตัวเลือก\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n\r\n              {pendingpromotion.map((show) => {\r\n                return (\r\n                  <tbody>\r\n                    <tr>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.id}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.shop_name}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.product_name}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.product_code}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.amount_point}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.category}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">\r\n                          {moment(show.expired).format('DD/MM/YYYY')}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <button\r\n                          className=\"buttoncalculate-modal1\"\r\n                          onClick={() => {\r\n                            acceptpromotion(\r\n                              show.id,\r\n                              show.shop_name,\r\n                              show.product_name,\r\n                              show.product_code,\r\n                              show.amount_point,\r\n                              show.picture,\r\n                              show.category,\r\n                              show.expired,\r\n                            )\r\n                          }}\r\n                        >\r\n                          อนุมัติ\r\n                        </button>\r\n                        <button\r\n                          className=\"buttoncalculate-modal2\"\r\n                          onClick={() => {\r\n                            disacceptpromotion(show.id)\r\n                          }}\r\n                        >\r\n                          ไม่อนุมัติ\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                )\r\n              })}\r\n            </table>\r\n          </div>\r\n          <input\r\n            placeholder=\"Tx-id หรือ เบอร์โทรศัพท์\"\r\n            onChange={(e) => {\r\n              setkeys(e.target.value)\r\n            }}\r\n          ></input>\r\n          <button onClick={checktransaction(keys)}>ค้นหา</button>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}