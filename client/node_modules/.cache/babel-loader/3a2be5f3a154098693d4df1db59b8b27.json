{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Link,useHistory}from\"react-router-dom\";import{useEffect}from\"react\";import axios from\"axios\";import{useState}from\"react\";import moment from\"moment\";import{Loader}from\"semantic-ui-react\";import\"./Transactionshop.css\";import{AnimatePresence,motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Transactionshop(){var history=useHistory();//------------------------------------------------\naxios.defaults.withCredentials=true;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),History=_useState2[0],setHistory=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setname=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),active=_useState8[0],setactive=_useState8[1];//loader\nuseEffect(function(){var timer=setTimeout(function(){setactive(false);axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){setname(response.data.user[0].name);setPhone(response.data.user[0].phone);axios.get(\"/transaction\").then(function(response){if(response){setHistory(response.data);}});}if(response.data.loggedIn===false||response.data.user[0].role!==\"shop\"){return history.push(\"/login\");}});},1000);return function(){return clearTimeout(timer);};},[]);/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:100}};/* ********************************** */return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsxs(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:[/*#__PURE__*/_jsx(Loader,{active:active}),/*#__PURE__*/_jsx(\"div\",{className:\"history\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-dark\",children:[/*#__PURE__*/_jsx(\"thead\",{}),History.map(function(val){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[val.transferor===phone?/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"withdraw\",children:\"\\u0E16\\u0E2D\\u0E19\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"withdraw-detail\",children:[val.transferor,\" \\u0E42\\u0E2D\\u0E19\\u0E44\\u0E1B\\u0E22\\u0E31\\u0E07 \",val.recipient,\" \"]})]},val.id):/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"deposit\",children:\"\\u0E1D\\u0E32\\u0E01\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"deposit-detail\",children:[val.transferor,\" \\u0E42\\u0E2D\\u0E19\\u0E44\\u0E1B\\u0E22\\u0E31\\u0E07 \",val.recipient,\" \"]})]},val.id),val.transferor===phone?/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"amountminus\",children:[\"- \",val.amount]}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:moment(val.time).format(\"DD/MMMM - LT\")})]}):/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"amountplus\",children:[\"+ \",val.amount]}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:moment(val.time).format(\"DD/MMMM - LT\")})]})]})});})]})})]})]});}export default Transactionshop;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Transactionshop.js"],"names":["React","Link","useHistory","useEffect","axios","useState","moment","Loader","AnimatePresence","motion","Transactionshop","history","defaults","withCredentials","History","setHistory","phone","setPhone","name","setname","active","setactive","timer","setTimeout","get","then","response","data","loggedIn","user","role","push","clearTimeout","pageTransition","in","opacity","x","out","map","val","transferor","recipient","id","amount","time","format"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Loader } from \"semantic-ui-react\";\r\nimport \"./Transactionshop.css\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\n\r\nfunction Transactionshop() {\r\n  const history = useHistory();\r\n  //------------------------------------------------\r\n  axios.defaults.withCredentials = true;\r\n\r\n  const [History, setHistory] = useState([]);\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [name, setname] = useState(\"\");\r\n  const [active, setactive] = useState(true); //loader\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false);\r\n      axios.get(\"/login\").then((response) => {\r\n        if (response.data.loggedIn === true) {\r\n          setname(response.data.user[0].name);\r\n          setPhone(response.data.user[0].phone);\r\n          axios.get(\"/transaction\").then((response) => {\r\n            if (response) {\r\n              setHistory(response.data);\r\n            }\r\n          });\r\n        }\r\n        if (\r\n          response.data.loggedIn === false ||\r\n          response.data.user[0].role !== \"shop\"\r\n        ) {\r\n          return history.push(\"/login\");\r\n        }\r\n      });\r\n    }, 1000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  \r\n   /* ********************************** */\r\n\r\n   const pageTransition = {\r\n\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n\r\n    }\r\n  };\r\n\r\n\r\n  /* ********************************** */\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <motion.div initial=\"out\" animate=\"in\" exit=\"out\" variants={pageTransition}>\r\n      <Loader active={active} />\r\n      <div className=\"history\">\r\n        <table className=\"table table-dark\">\r\n          <thead></thead>\r\n          {History.map((val) => {\r\n            return (\r\n              <tbody>\r\n                <tr>\r\n                  {val.transferor === phone ? (\r\n                    <td key={val.id}>\r\n                      <p className=\"withdraw\">ถอน</p>\r\n                      <p className=\"withdraw-detail\">\r\n                        {val.transferor} โอนไปยัง {val.recipient}{\" \"}\r\n                      </p>\r\n                    </td>\r\n                  ) : (\r\n                    <td key={val.id}>\r\n                      <p className=\"deposit\">ฝาก</p>\r\n                      <p className=\"deposit-detail\">\r\n                        {val.transferor} โอนไปยัง {val.recipient}{\" \"}\r\n                      </p>\r\n                    </td>\r\n                  )}\r\n\r\n                  {val.transferor === phone ? (\r\n                    <td>\r\n                      <p className=\"amountminus\">- {val.amount}</p>\r\n                      <p className=\"time\">\r\n                        {moment(val.time).format(\"DD/MMMM - LT\")}\r\n                      </p>\r\n                    </td>\r\n                  ) : (\r\n                    <td>\r\n                      <p className=\"amountplus\">+ {val.amount}</p>\r\n                      <p className=\"time\">\r\n                        {moment(val.time).format(\"DD/MMMM - LT\")}\r\n                      </p>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              </tbody>\r\n            );\r\n          })}\r\n        </table>\r\n      </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Transactionshop;\r\n"]},"metadata":{},"sourceType":"module"}