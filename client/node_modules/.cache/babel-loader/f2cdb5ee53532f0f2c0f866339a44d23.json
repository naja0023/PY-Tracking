{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import axios from\"axios\";import{useState}from\"react\";import{useHistory}from\"react-router\";import{useEffect}from\"react\";import moment from\"moment\";import{Accordion,Card}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{Loader}from\"semantic-ui-react\";import\"./Orderhistory.css\";import{motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Orderhistory(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setactive=_useState2[1];//loader\n//-----------------------------------------------------\nvar renderAccordion=function renderAccordion(list,index){return/*#__PURE__*/_jsx(Accordion,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Accordion.Toggle,{as:Card.Header,eventKey:list,className:\"accordion-order\",children:[moment(list.time).format(\"DD/MM/YYYY\"),\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"p-orderhistory\",children:[\"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21 \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-down\"})]})]}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:list,children:/*#__PURE__*/_jsx(Card.Body,{children:list.list.map(function(showlist){return/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{className:\"li-orderhistory\",children:[\"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",showlist.product_name,\" \\u0E23\\u0E32\\u0E04\\u0E32 :\",\" \",showlist.price]})});})})})]})},index);};//-----------------------------------------------\nvar history=useHistory();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),Orderhistory=_useState6[0],setMyorderHistory=_useState6[1];//-----------------------------------------------\n/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:100}};/* ********************************** */useEffect(function(){var timer=setTimeout(function(){setactive(false);axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){if(response.data.user[0].role===\"member\"){setPhone(response.data.user[0].phone);}else if(response.data.user[0].role===\"shop\"){setPhone(response.data.user[0].phone);}}else if(response.data.loggedIn===false||!response.data.user[0].role){return history.push(\"/login\");}});axios.get(\"/getmyorderhistory\").then(function(response){if(response){setMyorderHistory(response.data);}});},1000);return function(){return clearTimeout(timer);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsxs(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:[/*#__PURE__*/_jsx(\"div\",{className:\"div-h1-Orderhistory\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"h1-Orderhistory\",children:\"\\u0E1B\\u0E23\\u0E30\\u0E27\\u0E31\\u0E15\\u0E34\\u0E01\\u0E32\\u0E23\\u0E0B\\u0E37\\u0E49\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Loader,{active:active}),Orderhistory.map(renderAccordion)]})]});}export default Orderhistory;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Orderhistory.js"],"names":["React","axios","useState","useHistory","useEffect","moment","Accordion","Card","Link","Loader","motion","Orderhistory","active","setactive","renderAccordion","list","index","Header","time","format","map","showlist","product_name","price","history","phone","setPhone","setMyorderHistory","pageTransition","in","opacity","x","out","timer","setTimeout","get","then","response","data","loggedIn","user","role","push","clearTimeout"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect } from \"react\";\r\nimport moment from \"moment\";\r\nimport { Accordion, Card } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Loader } from \"semantic-ui-react\";\r\nimport \"./Orderhistory.css\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction Orderhistory() {\r\n  const [active, setactive] = useState(true); //loader\r\n  //-----------------------------------------------------\r\n  const renderAccordion = (list, index) => {\r\n    return (\r\n      <Accordion key={index}>\r\n        <Card>\r\n          <Accordion.Toggle\r\n            as={Card.Header}\r\n            eventKey={list}\r\n            className=\"accordion-order\"\r\n          >\r\n            {moment(list.time).format(\"DD/MM/YYYY\")}{\" \"}\r\n            <p className=\"p-orderhistory\">\r\n              รายละเอียดเพิ่มเติม <i className=\"fas fa-arrow-down\"></i>\r\n            </p>\r\n          </Accordion.Toggle>\r\n          <Accordion.Collapse eventKey={list}>\r\n            <Card.Body>\r\n              {list.list.map((showlist) => {\r\n                return (\r\n                  <ul>\r\n                    <li className=\"li-orderhistory\">\r\n                      ชื่อสินค้า : {showlist.product_name} ราคา :{\" \"}\r\n                      {showlist.price}\r\n                    </li>\r\n                  </ul>\r\n                );\r\n              })}\r\n            </Card.Body>\r\n          </Accordion.Collapse>\r\n        </Card>\r\n      </Accordion>\r\n    );\r\n  };\r\n\r\n  //-----------------------------------------------\r\n  const history = useHistory();\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [Orderhistory, setMyorderHistory] = useState([]);\r\n  //-----------------------------------------------\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n    },\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false);\r\n      axios.get(\"/login\").then((response) => {\r\n        if (response.data.loggedIn === true) {\r\n          if (response.data.user[0].role === \"member\") {\r\n            setPhone(response.data.user[0].phone);\r\n          } else if (response.data.user[0].role === \"shop\") {\r\n            setPhone(response.data.user[0].phone);\r\n          }\r\n        } else if (\r\n          response.data.loggedIn === false ||\r\n          !response.data.user[0].role\r\n        ) {\r\n          return history.push(\"/login\");\r\n        }\r\n      });\r\n\r\n      axios.get(\"/getmyorderhistory\").then((response) => {\r\n        if (response) {\r\n          setMyorderHistory(response.data);\r\n        }\r\n      });\r\n    }, 1000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <div className=\"div-h1-Orderhistory\">\r\n          <h3 className=\"h1-Orderhistory\">ประวัติการซื้อสินค้า</h3>\r\n        </div>\r\n        <hr />\r\n        <Loader active={active} />\r\n        {Orderhistory.map(renderAccordion)}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Orderhistory;\r\n"]},"metadata":{},"sourceType":"module"}