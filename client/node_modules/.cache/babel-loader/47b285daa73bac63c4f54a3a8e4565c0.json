{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import{useHistory}from\"react-router\";import axios from\"axios\";import{useEffect}from\"react\";import\"./Promotionshop.css\";import{Loader}from\"semantic-ui-react\";import{motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Promotionshop(){//-----------------------------------------------\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setactive=_useState2[1];//-----------------------------------------------\nvar history=useHistory();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),shoplist=_useState4[0],setShoplist=_useState4[1];var _useState5=useState(shoplist),_useState6=_slicedToArray(_useState5,2),filteredShop=_useState6[0],setFilteredShop=_useState6[1];//--------------search shop --------------//\nvar shopSearch=function shopSearch(event){var value=event.toLowerCase();var result=[];result=shoplist.filter(function(data){return data.shop_name.search(value)!=-1;});setFilteredShop(result);};//-----------------------------------------------\nvar getpromotion=function getpromotion(shopname){history.push(\"/promotiondetails/\"+shopname);};var gotomyshop=function gotomyshop(){history.push(\"/myshop\");};/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:100}};/* ********************************** */useEffect(function(){var timer=setTimeout(function(){setactive(false);axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){axios.get(\"/getshoplistpromotion\").then(function(response){if(response){setShoplist(response.data);setFilteredShop(response.data);}});}if(response.data.loggedIn===false||response.data.user[0].role!==\"shop\"){return history.push(\"/login\");}});},500);return function(){return clearTimeout(timer);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toppic-promotin\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"h2promotionmember\",children:\"\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"shopbox-promotinnnnn\",onClick:function onClick(){gotomyshop();},children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"button-cotainerpromotionnnn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-store\"}),\"\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\\u0E02\\u0E2D\\u0E07\\u0E09\\u0E31\\u0E19\"]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"divinsearch-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"insearch-divinsearch\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\",onChange:function onChange(event){return shopSearch(event.target.value);}}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})]}),/*#__PURE__*/_jsxs(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:[/*#__PURE__*/_jsx(Loader,{active:active}),/*#__PURE__*/_jsx(\"div\",{className:\"top-promotion\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-promotion\",children:filteredShop.map(function(val){return/*#__PURE__*/_jsxs(\"div\",{className:\"shopbox-promotin\",onClick:function onClick(){getpromotion(val.shop_name);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"divimg-promotin\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-promotin\",src:\"images/shop.png\",style:{height:\"100px\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"boxpromotion\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"p-promotin\",children:[\"\\u0E23\\u0E49\\u0E32\\u0E19 : \",val.shop_name]})})]});})})})]})]});}export default Promotionshop;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Promotionshop.js"],"names":["React","useState","Link","useHistory","axios","useEffect","Loader","motion","Promotionshop","active","setactive","history","shoplist","setShoplist","filteredShop","setFilteredShop","shopSearch","event","value","toLowerCase","result","filter","data","shop_name","search","getpromotion","shopname","push","gotomyshop","pageTransition","in","opacity","x","out","timer","setTimeout","get","then","response","loggedIn","user","role","clearTimeout","target","map","val","height"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport { useEffect } from \"react\";\r\nimport \"./Promotionshop.css\";\r\nimport { Loader } from \"semantic-ui-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction Promotionshop() {\r\n  //-----------------------------------------------\r\n  const [active, setactive] = useState(true);\r\n  //-----------------------------------------------\r\n  const history = useHistory();\r\n  const [shoplist, setShoplist] = useState([]);\r\n  const [filteredShop, setFilteredShop] = useState(shoplist);\r\n  //--------------search shop --------------//\r\n  const shopSearch = (event) => {\r\n    let value = event.toLowerCase();\r\n    let result = [];\r\n    result = shoplist.filter((data) => {\r\n      return data.shop_name.search(value) != -1;\r\n    });\r\n    setFilteredShop(result);\r\n  };\r\n  //-----------------------------------------------\r\n\r\n  const getpromotion = (shopname) => {\r\n    history.push(\"/promotiondetails/\" + shopname);\r\n  };\r\n\r\n  const gotomyshop = () => {\r\n    history.push(\"/myshop\");\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n    },\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false);\r\n      axios.get(\"/login\").then((response) => {\r\n        if (response.data.loggedIn === true) {\r\n          axios.get(\"/getshoplistpromotion\").then((response) => {\r\n            if (response) {\r\n              setShoplist(response.data);\r\n              setFilteredShop(response.data);\r\n            }\r\n          });\r\n        }\r\n        if (\r\n          response.data.loggedIn === false ||\r\n          response.data.user[0].role !== \"shop\"\r\n        ) {\r\n          return history.push(\"/login\");\r\n        }\r\n      });\r\n    }, 500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      {/* แต่งไว้หน้า promotion */}\r\n      <div className=\"toppic-promotin\">\r\n        <h2 className=\"h2promotionmember\">โปรโมชั่นร้านค้า</h2>\r\n      </div>\r\n\r\n      <div\r\n        className=\"shopbox-promotinnnnn\"\r\n        onClick={() => {\r\n          gotomyshop();\r\n        }}\r\n      >\r\n        <div>\r\n          <button className=\"button-cotainerpromotionnnn\">\r\n            <i className=\"fas fa-store\"></i>ร้านค้าของฉัน\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* แต่งไว้หน้า promotion */}\r\n      <div className=\"divinsearch-1\">\r\n        <input\r\n          className=\"insearch-divinsearch\"\r\n          type=\"text\"\r\n          placeholder=\"ค้นหาร้านค้า\"\r\n          onChange={(event) => shopSearch(event.target.value)}\r\n        />\r\n        <i className=\"fas fa-search\"></i>\r\n      </div>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <Loader active={active} />\r\n        {/* แต่งไว้หน้า promotion */}\r\n        <div className=\"top-promotion\">\r\n          <div className=\"container-promotion\">\r\n            {filteredShop.map((val) => {\r\n              return (\r\n                <div\r\n                  className=\"shopbox-promotin\"\r\n                  onClick={() => {\r\n                    getpromotion(val.shop_name);\r\n                  }}\r\n                >\r\n                  <div className=\"divimg-promotin\">\r\n                    <img className=\"img-promotin\" src=\"images/shop.png\" style={{height : \"100px\"}}></img>\r\n                  </div>\r\n                  <div className=\"boxpromotion\">\r\n                    <p className=\"p-promotin\">ร้าน : {val.shop_name}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Promotionshop;\r\n"]},"metadata":{},"sourceType":"module"}