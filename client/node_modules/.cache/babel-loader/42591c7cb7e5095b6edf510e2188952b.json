{"ast":null,"code":"var _jsxFileName = \"D:\\\\login_and_register - Copy\\\\client\\\\src\\\\components\\\\Admin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Admin.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport { Icon } from \"semantic-ui-react\";\nimport { Loader } from \"semantic-ui-react\";\nimport moment from \"moment\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport SideNav, { Toggle, Nav, NavItem, NavIcon, NavText } from \"@trendmicro/react-sidenav\"; // Be sure to include styles at some point, probably during your bootstraping\n\nimport \"@trendmicro/react-sidenav/dist/react-sidenav.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Admin() {\n  _s();\n\n  const history = useHistory();\n  const location = useHistory();\n  const [active, setactive] = useState(true); //loader\n  //-------------------------------------------\n\n  const [name, setname] = useState(\"\");\n  const [point, setpoint] = useState();\n  const [pendingpromotion, setpendingpromotion] = useState([]);\n  axios.defaults.withCredentials = true; //-------------------------------------------\n\n  const logout = () => {\n    axios.get(\"/logout\");\n    history.go();\n    history.push(\"/\");\n  };\n\n  const acceptpromotion = (a, b, c, d, e, f, g, h) => {\n    axios.post(\"/acceptpromotionpoint\", {\n      req_id: a,\n      shop_name: b,\n      product_name: c,\n      product_code: d,\n      amount_point: e,\n      picture: f,\n      category: g,\n      expired: h\n    }).then(response => {\n      if (response.data.message) {\n        alert(response.data.message);\n        history.go();\n      }\n    });\n  };\n\n  const disacceptpromotion = id => {\n    axios.put(`/disacceptpromotion/${id}`).then(response => {\n      if (response.data.message) {\n        alert(response.data.message);\n        history.go();\n      }\n    });\n  };\n  /* ********************************** */\n\n\n  const pageTransition = {\n    in: {\n      opacity: 1,\n      x: 0\n    },\n    out: {\n      opacity: 0,\n      x: \"-100vh\"\n    }\n  };\n  /* ********************************** */\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setactive(false);\n      axios.get(\"http://localhost:3001/login\").then(response => {\n        if (response.data.loggedIn === true && response.data.user[0].role === \"admin\") {\n          setname(response.data.user[0].name);\n          setpoint(response.data.user[0].point);\n          axios.get(\"/getpromotionrequest\").then(response => {\n            if (response.data) {\n              setpendingpromotion(response.data);\n            }\n          });\n        } else {\n          history.push(\"/login\");\n        }\n      });\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"adminpage\",\n    children: [/*#__PURE__*/_jsxDEV(SideNav, {\n      style: {\n        background: \"black\"\n      },\n      onSelect: selected => {\n        // Add your code here\n        const to = \"/\" + selected;\n\n        if (location.pathname !== to) {\n          history.push(to);\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(SideNav.Toggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SideNav.Nav, {\n        defaultSelected: \"home\",\n        children: [/*#__PURE__*/_jsxDEV(NavItem, {\n          eventKey: \"\",\n          children: [/*#__PURE__*/_jsxDEV(NavIcon, {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-fw fa-home\",\n              style: {\n                fontSize: \"1.75em\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavText, {\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n          onClick: logout,\n          children: [/*#__PURE__*/_jsxDEV(NavIcon, {\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"log out\",\n              style: {\n                fontSize: \"1.75em\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(NavText, {\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: \"out\",\n      animate: \"in\",\n      exit: \"out\",\n      variants: pageTransition,\n      children: [/*#__PURE__*/_jsxDEV(Loader, {\n        active: active\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"data-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h1-admin\",\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"h1-admin\",\n          children: [\"Hi \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"h1-admin\",\n          children: [\"point : \", point]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"table-wrapper-scroll-y my-custom-scrollbar\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            class: \"table table-bordered table-striped mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"request id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"shop name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"product name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"product code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"point\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"expired\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th-table\",\n                  scope: \"col\",\n                  children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), pendingpromotion.map(show => {\n              return /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.shop_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.product_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.product_code\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.amount_point\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: show.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h1-admin\",\n                      children: moment(show.expired).format(\"DD/MM/YYYY\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"td-table\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"buttoncalculate-modal1\",\n                      onClick: () => {\n                        acceptpromotion(show.id, show.shop_name, show.product_name, show.product_code, show.amount_point, show.picture, show.category, show.expired);\n                      },\n                      children: \"\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"buttoncalculate-modal2\",\n                      onClick: () => {\n                        disacceptpromotion(show.id);\n                      },\n                      children: \"\\u0E44\\u0E21\\u0E48\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Admin, \"mjp6gH4AnfgHd/09Id8Aqnz8xmY=\", false, function () {\n  return [useHistory, useHistory];\n});\n\n_c = Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Admin.js"],"names":["React","useEffect","axios","useState","useHistory","Icon","Loader","moment","AnimatePresence","motion","SideNav","Toggle","Nav","NavItem","NavIcon","NavText","Admin","history","location","active","setactive","name","setname","point","setpoint","pendingpromotion","setpendingpromotion","defaults","withCredentials","logout","get","go","push","acceptpromotion","a","b","c","d","e","f","g","h","post","req_id","shop_name","product_name","product_code","amount_point","picture","category","expired","then","response","data","message","alert","disacceptpromotion","id","put","pageTransition","in","opacity","x","out","timer","setTimeout","loggedIn","user","role","clearTimeout","background","selected","to","pathname","fontSize","map","show","format"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./Admin.css\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { Loader } from \"semantic-ui-react\";\r\nimport moment from \"moment\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\n\r\nimport SideNav, {\r\n  Toggle,\r\n  Nav,\r\n  NavItem,\r\n  NavIcon,\r\n  NavText,\r\n} from \"@trendmicro/react-sidenav\";\r\n\r\n// Be sure to include styles at some point, probably during your bootstraping\r\nimport \"@trendmicro/react-sidenav/dist/react-sidenav.css\";\r\n\r\nexport default function Admin() {\r\n  const history = useHistory();\r\n  const location = useHistory();\r\n  const [active, setactive] = useState(true); //loader\r\n  //-------------------------------------------\r\n  const [name, setname] = useState(\"\");\r\n  const [point, setpoint] = useState();\r\n  const [pendingpromotion, setpendingpromotion] = useState([]);\r\n  axios.defaults.withCredentials = true;\r\n  //-------------------------------------------\r\n  const logout = () => {\r\n    axios.get(\"/logout\");\r\n    history.go();\r\n    history.push(\"/\");\r\n  };\r\n\r\n  const acceptpromotion = (a, b, c, d, e, f, g, h) => {\r\n    axios\r\n      .post(\"/acceptpromotionpoint\", {\r\n        req_id: a,\r\n        shop_name: b,\r\n        product_name: c,\r\n        product_code: d,\r\n        amount_point: e,\r\n        picture: f,\r\n        category: g,\r\n        expired: h,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.message) {\r\n          alert(response.data.message);\r\n          history.go();\r\n        }\r\n      });\r\n  };\r\n\r\n  const disacceptpromotion = (id) => {\r\n    axios.put(`/disacceptpromotion/${id}`).then((response) => {\r\n      if (response.data.message) {\r\n        alert(response.data.message);\r\n        history.go();\r\n      }\r\n    });\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: \"-100vh\",\r\n\r\n    }\r\n  };\r\n\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false);\r\n      axios.get(\"http://localhost:3001/login\").then((response) => {\r\n        if (\r\n          response.data.loggedIn === true &&\r\n          response.data.user[0].role === \"admin\"\r\n        ) {\r\n          setname(response.data.user[0].name);\r\n          setpoint(response.data.user[0].point);\r\n          axios.get(\"/getpromotionrequest\").then((response) => {\r\n            if (response.data) {\r\n              setpendingpromotion(response.data);\r\n            }\r\n          });\r\n        } else {\r\n          history.push(\"/login\");\r\n        }\r\n      });\r\n    }, 2000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"adminpage\">\r\n      <SideNav\r\n        style={{ background: \"black\" }}\r\n        onSelect={(selected) => {\r\n          // Add your code here\r\n          const to = \"/\" + selected;\r\n          if (location.pathname !== to) {\r\n            history.push(to);\r\n          }\r\n        }}\r\n      >\r\n        <SideNav.Toggle />\r\n        <SideNav.Nav defaultSelected=\"home\">\r\n          <NavItem eventKey=\"\">\r\n            <NavIcon>\r\n              <i className=\"fa fa-fw fa-home\" style={{ fontSize: \"1.75em\" }} />\r\n            </NavIcon>\r\n            <NavText>Home</NavText>\r\n          </NavItem>\r\n          <NavItem onClick={logout}>\r\n            <NavIcon>\r\n              <Icon name=\"log out\" style={{ fontSize: \"1.75em\" }} />\r\n            </NavIcon>\r\n            <NavText>Logout</NavText>\r\n          </NavItem>\r\n        </SideNav.Nav>\r\n      </SideNav>\r\n\r\n      <motion.div initial=\"out\" animate=\"in\" exit=\"out\" variants={pageTransition}>\r\n        <Loader active={active} />\r\n        <div className=\"data-container\">\r\n          <h1 className=\"h1-admin\">Admin</h1>\r\n          <h2 className=\"h1-admin\">Hi {name}</h2>\r\n          <h2 className=\"h1-admin\">point : {point}</h2>\r\n\r\n          <div class=\"table-wrapper-scroll-y my-custom-scrollbar\">\r\n            <table class=\"table table-bordered table-striped mb-0\">\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"th-table\" scope=\"col\">request id</th>\r\n                  <th className=\"th-table\" scope=\"col\">shop name</th>\r\n                  <th className=\"th-table\" scope=\"col\">product name</th>\r\n                  <th className=\"th-table\" scope=\"col\">product code</th>\r\n                  <th className=\"th-table\" scope=\"col\">point</th>\r\n                  <th className=\"th-table\" scope=\"col\">category</th>\r\n                  <th className=\"th-table\" scope=\"col\">expired</th>\r\n                  <th className=\"th-table\" scope=\"col\">ตัวเลือก</th>\r\n                </tr>\r\n              </thead>\r\n\r\n\r\n              {pendingpromotion.map((show) => {\r\n                return (\r\n\r\n                  <tbody>\r\n                    <tr>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.id}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.shop_name}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.product_name}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.product_code}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.amount_point}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{show.category}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <p className=\"h1-admin\">{moment(show.expired).format(\"DD/MM/YYYY\")}</p>\r\n                      </td>\r\n                      <td className=\"td-table\">\r\n                        <button className=\"buttoncalculate-modal1\"\r\n                          onClick={() => {\r\n                            acceptpromotion(\r\n                              show.id,\r\n                              show.shop_name,\r\n                              show.product_name,\r\n                              show.product_code,\r\n                              show.amount_point,\r\n                              show.picture,\r\n                              show.category,\r\n                              show.expired\r\n                            );\r\n                          }}\r\n                        >\r\n                          อนุมัติ\r\n                        </button>\r\n                        <button className=\"buttoncalculate-modal2\"\r\n                          onClick={() => {\r\n                            disacceptpromotion(show.id);\r\n                          }}\r\n                        >\r\n                          ไม่อนุมัติ\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                );\r\n              })}\r\n\r\n            </table>\r\n\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div >\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}