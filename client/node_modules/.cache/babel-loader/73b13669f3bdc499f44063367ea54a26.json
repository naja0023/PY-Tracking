{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect}from\"react\";import axios from\"axios\";import{useState}from\"react\";import\"./login_and_register.css\";import{Redirect}from\"react-router\";import{Link}from\"react-router-dom\";import{useHistory}from\"react-router\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){//----------------------------------------------------------\nvar history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),loginStatus=_useState6[0],setLoginSatus=_useState6[1];var _useState7=useState(\"flase\"),_useState8=_slicedToArray(_useState7,2),isLoggedIn=_useState8[0],setIsLoggedIn=_useState8[1];axios.defaults.withCredentials=true;//login\nvar login=function login(){axios.post(\"/login\",{email:email,password:password}).then(function(response){if(response.data.message){setLoginSatus(response.data.message);}else{window.location.replace(\"/\");}});};useEffect(function(){axios.get(\"/login\").then(function(response){if(response.data.loggedIn==true){setIsLoggedIn(\"true\");}});},[]);if(isLoggedIn==\"true\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container bootstrap snippets bootdey\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-6 col-md-4 col-md-offset-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center login-title\",children:\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"account-wall\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile-img\",src:\"https://bootdey.com/img/Content/avatar/avatar7.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-signin\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Email\",onChange:function onChange(e){setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",onChange:function onChange(e){setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"a\",{href:\"/registration\",className:\"bn13\",children:\"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01\"}),/*#__PURE__*/_jsx(\"button\",{onClick:login,className:\"bn29\",type:\"submit\",children:\"Sign in\"})]})]})]})})})})]});}","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/pages/Login.js"],"names":["React","useEffect","axios","useState","Redirect","Link","useHistory","Login","history","email","setEmail","password","setPassword","loginStatus","setLoginSatus","isLoggedIn","setIsLoggedIn","defaults","withCredentials","login","post","then","response","data","message","window","location","replace","get","loggedIn","e","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport \"./login_and_register.css\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router\";\r\nimport \"./Login.css\";\r\n\r\nexport default function Login() {\r\n  //----------------------------------------------------------\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const [loginStatus, setLoginSatus] = useState(\"\");\r\n  const [isLoggedIn, setIsLoggedIn] = useState(\"flase\");\r\n\r\n  axios.defaults.withCredentials = true;\r\n\r\n  //login\r\n  const login = () => {\r\n    axios\r\n      .post(\"/login\", {\r\n        email: email,\r\n        password: password,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.message) {\r\n          setLoginSatus(response.data.message);\r\n        } else {\r\n          window.location.replace(\"/\");\r\n        }\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/login\").then((response) => {\r\n      if (response.data.loggedIn == true) {\r\n        setIsLoggedIn(\"true\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  if (isLoggedIn == \"true\") {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link to=\"/\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n      </nav>\r\n      <div className=\"login-page\">\r\n        <div className=\"container bootstrap snippets bootdey\">\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-6 col-md-4 col-md-offset-4\">\r\n              <h1 className=\"text-center login-title\">เข้าสู่ระบบ</h1>\r\n              <div className=\"account-wall\">\r\n                <img\r\n                  className=\"profile-img\"\r\n                  src=\"https://bootdey.com/img/Content/avatar/avatar7.png\"\r\n                  alt=\"\"\r\n                />\r\n                <div className=\"form-signin\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Email\"\r\n                    onChange={(e) => {\r\n                      setEmail(e.target.value);\r\n                    }}\r\n                    required\r\n                  />\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Password\"\r\n                    onChange={(e) => {\r\n                      setPassword(e.target.value);\r\n                    }}\r\n                    required\r\n                  />\r\n                  <a href=\"/registration\" className=\"bn13\">\r\n                    สมัครสมาชิก\r\n                  </a>\r\n                  <button onClick={login} className=\"bn29\" type=\"submit\">\r\n                    Sign in\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/*<label for=\"user\" className=\"label\">Email</label>\r\n          <input className=\"input\" type=\"text\"\r\n            placeholder=\"Email\"\r\n            onChange={(e) => {\r\n              setEmail(e.target.value);\r\n            }}\r\n            required />\r\n\r\n          <label for=\"pass\" className=\"label\">Password</label>\r\n          <input className=\"input\" type=\"password\"\r\n            placeholder=\"Password\"\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n            required />\r\n\r\n          <div className=\"notification\">\r\n            <p className=\"notify\">{loginStatus}</p>\r\n          </div>\r\n\r\n          <p>ยังไม่ได้เป็นสมาชิค?</p>\r\n          <Link to='/registration'>สมัครสมาชิก</Link><br /><br />\r\n          <input onClick={login} type=\"submit\" className=\"button\" value=\"LOGIN\" />*/}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}