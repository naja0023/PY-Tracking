{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{useEffect}from\"react\";import axios from\"axios\";import\"./Mypromotionshop.css\";import{Collapse}from\"react-bootstrap\";import{Loader}from\"semantic-ui-react\";import{motion}from\"framer-motion\";import{Button,Header,Icon,Modal}from\"semantic-ui-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Mypromotionshop(){//-----------------------------------------------------\nvar history=useHistory();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),openModal=_React$useState2[0],setOpenModal=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];//collapse\nvar _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),active=_useState4[0],setactive=_useState4[1];//loader\n//-----------------------------------------------------\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),phone=_useState10[0],setPhone=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),email=_useState12[0],setEmail=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),point=_useState14[0],setPoint=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),productID=_useState16[0],setProductID=_useState16[1];var option1=\"option1\";var option2=\"option2\";var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),mypromotionpoint=_useState18[0],setMypromotionPoint=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),mypromotion=_useState20[0],setMypromotion=_useState20[1];var goAddpromotion=function goAddpromotion(option){history.push(\"/addpromotion/\"+option);};var deletepromotion=function deletepromotion(){axios.delete(\"/deletepromotion\"+productID).then(function(response){if(response.data.message){alert(response.data.message);history.go();}});};/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:100}};/* ********************************** */useEffect(function(){var timer=setTimeout(function(){setactive(false);axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){setId(response.data.user[0].id);setName(response.data.user[0].name);setPhone(response.data.user[0].phone);setEmail(response.data.user[0].email);setPoint(response.data.user[0].point);axios.get(\"/getmypromotionpoint\").then(function(response){if(response){setMypromotionPoint(response.data);}});axios.get(\"/getmypromotion\").then(function(response){if(response){setMypromotion(response.data);}});}if(response.data.loggedIn===false||response.data.user[0].role!==\"shop\"){return history.push(\"/login\");}});},1000);return function(){return clearTimeout(timer);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Modal,{basic:true,onClose:function onClose(){return setOpenModal(false);},onOpen:function onOpen(){return setOpenModal(true);},open:openModal,size:\"small\",style:{width:\"100%\",top:\"40%\"},children:/*#__PURE__*/_jsx(Header,{icon:true,children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},children:[/*#__PURE__*/_jsx(\"div\",{className:\"buttoniconedit\",children:/*#__PURE__*/_jsxs(Button,{className:\"buttoniconedit\",color:\"red\",inverted:true,onClick:function onClick(){return deletepromotion();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"iconedit\",children:/*#__PURE__*/_jsx(Icon,{name:\"trash\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E25\\u0E1A\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"buttoniconedit\",children:/*#__PURE__*/_jsxs(Button,{className:\"buttoniconedit\",color:\"red\",inverted:true,onClick:function onClick(){return setOpenModal(false);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"iconedit\",children:/*#__PURE__*/_jsx(Icon,{name:\"cancel\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"})]})})]})})}),/*#__PURE__*/_jsx(\"link\",{href:\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\",rel:\"stylesheet\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/promotion-shop\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsx(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:/*#__PURE__*/_jsxs(\"div\",{className:\"top-promotion\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button-top-addpromotion1\",onClick:function onClick(){return setOpen(!open);},\"aria-controls\":\"example-collapse-text\",\"aria-expanded\":open,children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-plus\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\"]}),/*#__PURE__*/_jsx(Collapse,{in:open,children:/*#__PURE__*/_jsxs(\"div\",{id:\"example-collapse-text\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button-top-addpromotion\",onClick:function onClick(){goAddpromotion(option1);},children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-plus\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button-top-addpromotion\",onClick:function onClick(){goAddpromotion(option2);},children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-plus\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E41\\u0E25\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"divinsearch-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"insearch-divinsearch\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divh1promotiondetails1\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h1promotiondetails1\",children:\"\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-promotion\",children:[/*#__PURE__*/_jsx(Loader,{active:active}),mypromotionpoint.map(function(promopoint){return/*#__PURE__*/_jsxs(\"div\",{className:\"shopbox-promotin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shopbox-img\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid-shopbox\",src:promopoint.picture,alt:\"trainer-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"boxpromotion\",onClick:\"\",children:[/*#__PURE__*/_jsx(\"p\",{children:promopoint.product_name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0E44\\u0E14\\u0E49\\u0E23\\u0E31\\u0E1A : \",promopoint.amount_point,\" \\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"]})]})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divh1promotiondetails2\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h1promotiondetails2\",children:\"\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E41\\u0E25\\u0E01\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-promotion\",children:[/*#__PURE__*/_jsx(Loader,{active:active}),mypromotion.map(function(val){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){setProductID(val.id);setOpenModal(true);},className:\"shopbox-promotin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shopbox-img\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid-shopbox\",style:{height:\"100px\"},src:val.picture,alt:\"trainer-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"boxpromotion\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 : \",val.product_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19 : \",val.amount]})]})]});})]})]})})]});}export default Mypromotionshop;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Mypromotionshop.js"],"names":["React","useState","Link","useHistory","useEffect","axios","Collapse","Loader","motion","Button","Header","Icon","Modal","Mypromotionshop","history","openModal","setOpenModal","open","setOpen","active","setactive","id","setId","name","setName","phone","setPhone","email","setEmail","point","setPoint","productID","setProductID","option1","option2","mypromotionpoint","setMypromotionPoint","mypromotion","setMypromotion","goAddpromotion","option","push","deletepromotion","delete","then","response","data","message","alert","go","pageTransition","in","opacity","x","out","timer","setTimeout","get","loggedIn","user","role","clearTimeout","width","top","y","map","promopoint","picture","product_name","amount_point","val","height","amount"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Mypromotionshop.css\";\r\nimport { Collapse } from \"react-bootstrap\";\r\nimport { Loader } from \"semantic-ui-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Button, Header, Icon, Modal } from \"semantic-ui-react\";\r\n\r\nfunction Mypromotionshop() {\r\n  //-----------------------------------------------------\r\n  const history = useHistory();\r\n  const [openModal, setOpenModal] = React.useState(false);\r\n  const [open, setOpen] = useState(false); //collapse\r\n  const [active, setactive] = useState(true); //loader\r\n  //-----------------------------------------------------\r\n\r\n  const [id, setId] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [point, setPoint] = useState();\r\n\r\n  const [productID, setProductID] = useState();\r\n\r\n  const option1 = \"option1\";\r\n  const option2 = \"option2\";\r\n\r\n  const [mypromotionpoint, setMypromotionPoint] = useState([]);\r\n  const [mypromotion, setMypromotion] = useState([]);\r\n\r\n  const goAddpromotion = (option) => {\r\n    history.push(\"/addpromotion/\" + option);\r\n  };\r\n\r\n  const deletepromotion = () => {\r\n    axios.delete(\"/deletepromotion\" + productID).then((response) => {\r\n      if (response.data.message) {\r\n        alert(response.data.message);\r\n        history.go();\r\n      }\r\n    });\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n    },\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false);\r\n      axios.get(\"/login\").then((response) => {\r\n        if (response.data.loggedIn === true) {\r\n          setId(response.data.user[0].id);\r\n          setName(response.data.user[0].name);\r\n          setPhone(response.data.user[0].phone);\r\n          setEmail(response.data.user[0].email);\r\n          setPoint(response.data.user[0].point);\r\n          axios.get(\"/getmypromotionpoint\").then((response) => {\r\n            if (response) {\r\n              setMypromotionPoint(response.data);\r\n            }\r\n          });\r\n          axios.get(\"/getmypromotion\").then((response) => {\r\n            if (response) {\r\n              setMypromotion(response.data);\r\n            }\r\n          });\r\n        }\r\n        if (\r\n          response.data.loggedIn === false ||\r\n          response.data.user[0].role !== \"shop\"\r\n        ) {\r\n          return history.push(\"/login\");\r\n        }\r\n      });\r\n    }, 1000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        basic\r\n        onClose={() => setOpenModal(false)}\r\n        onOpen={() => setOpenModal(true)}\r\n        open={openModal}\r\n        size=\"small\"\r\n        style={{ width: \"100%\", top: \"40%\" }}\r\n      >\r\n        \r\n        <Header icon> \r\n        <motion.div initial={{ opacity: 0, y: 100 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 100 }}>\r\n          <div className=\"buttoniconedit\">\r\n            <Button\r\n              className=\"buttoniconedit\"\r\n              color=\"red\"\r\n              inverted\r\n              onClick={() => deletepromotion()}\r\n            >\r\n              <div className=\"iconedit\">\r\n                <Icon name=\"trash\" />\r\n              </div>\r\n              <p>ลบ</p>\r\n            </Button>\r\n          </div>\r\n          <div className=\"buttoniconedit\">\r\n            <Button\r\n              className=\"buttoniconedit\"\r\n              color=\"red\"\r\n              inverted\r\n              onClick={() => setOpenModal(false)}\r\n            >\r\n              <div className=\"iconedit\">\r\n                <Icon name=\"cancel\" />\r\n              </div>\r\n              <p>ยกเลิก</p>\r\n            </Button>\r\n          </div>\r\n          </motion.div>\r\n        </Header>\r\n        \r\n      </Modal>\r\n\r\n      <link\r\n        href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\"\r\n        rel=\"stylesheet\"\r\n      />\r\n\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/promotion-shop\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <div className=\"top-promotion\">\r\n          <button\r\n            className=\"button-top-addpromotion1\"\r\n            onClick={() => setOpen(!open)}\r\n            aria-controls=\"example-collapse-text\"\r\n            aria-expanded={open}\r\n          >\r\n            <i class=\"fas fa-plus\"></i>\r\n            เพิ่มโปรโมชั่น\r\n          </button>\r\n          <Collapse in={open}>\r\n            <div id=\"example-collapse-text\">\r\n              <button\r\n                className=\"button-top-addpromotion\"\r\n                onClick={() => {\r\n                  goAddpromotion(option1);\r\n                }}\r\n              >\r\n                <i class=\"fas fa-plus\"></i>\r\n                เพิ่มโปรโมชั่นคะแนน\r\n              </button>\r\n              <button\r\n                className=\"button-top-addpromotion\"\r\n                onClick={() => {\r\n                  goAddpromotion(option2);\r\n                }}\r\n              >\r\n                <i class=\"fas fa-plus\"></i>\r\n                เพิ่มโปรโมชั่นแลกสินค้า\r\n              </button>\r\n            </div>\r\n          </Collapse>\r\n          {/*<div className=\"toppic-promotin\">\r\n          <h2 className=\"h2promotionmember\">โปรโมชั่นร้านค้า</h2>\r\n            </div>*/}\r\n          <div className=\"divinsearch-1\">\r\n            <input\r\n              className=\"insearch-divinsearch\"\r\n              type=\"text\"\r\n              placeholder=\"ค้นหาร้านค้า\"\r\n            />\r\n            <i className=\"fas fa-search\"></i>\r\n          </div>\r\n\r\n          {/*แต่งไว้หน้า promotiondetails*/}\r\n          <div className=\"divh1promotiondetails1\">\r\n            <h1 className=\"h1promotiondetails1\">โปรโมชั่นคะแนน</h1>\r\n          </div>\r\n\r\n          <div className=\"container-promotion\">\r\n            <Loader active={active} />\r\n            {mypromotionpoint.map((promopoint) => {\r\n              return (\r\n                <div className=\"shopbox-promotin\">\r\n                  {/*shopbox-img แต่งไว้ที่ promotionshop*/}\r\n                  <div className=\"shopbox-img\">\r\n                    <img\r\n                      className=\"img-fluid-shopbox\"\r\n                      src={promopoint.picture}\r\n                      alt=\"trainer-img\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"boxpromotion\" onClick=\"\">\r\n                    <p>{promopoint.product_name}</p>\r\n                    <p>ได้รับ : {promopoint.amount_point} คะแนน</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/*แต่งไว้หน้า promotiondetails*/}\r\n          <div className=\"divh1promotiondetails2\">\r\n            <h1 className=\"h1promotiondetails2\">โปรโมชั่นแลกสินค้า</h1>\r\n          </div>\r\n\r\n          <div className=\"container-promotion\">\r\n            <Loader active={active} />\r\n            {mypromotion.map((val) => {\r\n              return (\r\n                <div\r\n                  onClick={() => {\r\n                    setProductID(val.id);\r\n                    setOpenModal(true);\r\n                  }}\r\n                  className=\"shopbox-promotin\"\r\n                >\r\n                  {/*shopbox-img แต่งไว้ที่ promotionshop*/}\r\n                  <div className=\"shopbox-img\">\r\n                    <img\r\n                      className=\"img-fluid-shopbox\"\r\n                      style={{height : \"100px\"}}\r\n                      src={val.picture}\r\n                      alt=\"trainer-img\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"boxpromotion\">\r\n                    <p>ชื่อสินค้า : {val.product_name}</p>\r\n                    <p>จำนวนคะแนน : {val.amount}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Mypromotionshop;\r\n"]},"metadata":{},"sourceType":"module"}