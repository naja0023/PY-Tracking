{"ast":null,"code":"var _jsxFileName = \"D:\\\\login_and_register - Copy\\\\client\\\\src\\\\components\\\\Calculatepointshop.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"react-modal\";\nimport \"./Calculatepointshop.css\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst customStyles = {\n  content: {\n    width: \"100%\",\n    height: \"50%\",\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nfunction Calculatepointshop() {\n  _s();\n\n  const [modalIsOpen, setIsOpen] = React.useState(false);\n\n  function openModal() {\n    setIsOpen(true);\n  }\n\n  function afterOpenModal() {// references are now sync'd and can be accessed.\n  }\n\n  function closeModal() {\n    setIsOpen(false);\n  } //-----------------------------------------------------\n\n\n  const history = useHistory(); //-----------------------------------------------------\n\n  const [product_code, setproduct_code] = useState(\"\");\n  const [productlist, setProductlist] = useState([]);\n  const [promotionlist, setPromotionlist] = useState([]);\n  const [total_price, setTotal_Price] = useState(0);\n  const [id, setId] = useState();\n  const [shoppoint, setShopPoint] = useState();\n  const [phone, setPhone] = useState(\"\");\n  const [destPhone, setdestPhone] = useState(\"\");\n  const [total_point, setTotal_Point] = useState(0);\n  const [product_amount, setproduct_amount] = useState(1);\n\n  const refresh = () => {\n    axios.get(\"/shop\");\n    window.location.reload();\n  };\n\n  const entercode = number => {\n    var a;\n\n    if (!product_code) {} else {\n      axios.post(\"/enterproductcode\", {\n        product_code: product_code\n      }).then(response => {\n        if (response.data.productlist) {\n          for (a = 0; a < `${productlist.length}`; a++) {\n            if (productlist[a].product_code === product_code) {\n              productlist[a].number += number;\n            } else {\n              setProductlist([...productlist, {\n                id: a,\n                product_name: response.data.productlist[0].product_name,\n                product_code: response.data.productlist[0].product_code,\n                price: response.data.productlist[0].price,\n                number: number\n              }]);\n            }\n          }\n          /*setProductlist([\r\n            ...productlist,\r\n            {\r\n              id: a,\r\n              product_name: response.data.productlist[0].product_name,\r\n              product_code: response.data.productlist[0].product_code,\r\n              price: response.data.productlist[0].price,\r\n              number: number,\r\n            },\r\n          ]);*/\n\n\n          setTotal_Price(total_price + response.data.productlist[0].price * number);\n        } else if (response.data.result2) {\n          for (a = 0; a < `${productlist.length}`; a++) {}\n\n          setProductlist([...productlist, {\n            id: a,\n            product_name: response.data.result1[0].product_name,\n            product_code: response.data.result1[0].product_code,\n            price: response.data.result1[0].price,\n            number: number\n          }]);\n          setPromotionlist([...promotionlist, {\n            id: a,\n            product_name: response.data.result1[0].product_name,\n            product_code: response.data.result1[0].product_code,\n            price: response.data.result1[0].price,\n            amount_point: response.data.result2.amount_point,\n            number: number\n          }]);\n          setTotal_Price(total_price + response.data.result1[0].price * number);\n        }\n      });\n      setproduct_code(\"\");\n    }\n  };\n\n  const transferTocustomer = () => {\n    if (!destPhone) {\n      axios.post(\"/transaction/buying\", {\n        list: productlist,\n        destPhone: destPhone\n      });\n      alert(\"success\");\n      history.go();\n    } else {\n      if (shoppoint < total_point) {\n        alert(\"คะแนนร้านค้าไม่เพียงพอ กรุณาเติมคะแนน\");\n      } else {\n        axios.post(\"/calculateprice\", {\n          total_point: total_point,\n          destPhone: destPhone\n        }).then(response => {\n          if (response.data.calculate) {\n            axios.post(\"/transaction/buying\", {\n              list: productlist,\n              destPhone: destPhone\n            });\n            alert(response.data.calculate);\n            axios.get(\"/shop\");\n            history.go();\n          } else {\n            alert(response.data.message);\n          }\n        });\n      }\n    }\n  };\n\n  const calculatepoint = () => {\n    var promotionpoint = 0;\n\n    for (let i = 0; i < `${promotionlist.length}`; i++) {\n      promotionpoint += (promotionlist[i].amount_point - Math.floor(promotionlist[i].price / 50)) * promotionlist[i].number;\n    }\n\n    setTotal_Point(Math.floor(total_price / 50) + promotionpoint);\n\n    if (productlist.length === 0) {} else {\n      openModal();\n    }\n  };\n\n  const deleteproduct = e => {\n    const id = e.target.getAttribute(\"name\");\n    setProductlist(productlist.filter(productlist => JSON.stringify(productlist.id) !== id));\n    setPromotionlist(promotionlist.filter(promotionlist => JSON.stringify(promotionlist.id) !== id));\n  };\n\n  const updateprice = price => {\n    setTotal_Price(total_price - price);\n  };\n\n  const gotoTopupPage = () => {\n    history.push(\"/top-up-point-shop\");\n  };\n  /* ********************************** */\n\n\n  const pageTransition = {\n    in: {\n      opacity: 1,\n      x: 0\n    },\n    out: {\n      opacity: 0,\n      x: 100\n    }\n  };\n  /* ********************************** */\n\n  useEffect(() => {\n    axios.get(\"/login\").then(response => {\n      if (response.data.loggedIn === true) {\n        setId(response.data.user[0].id);\n        setShopPoint(response.data.user[0].shoppoint);\n        setPhone(response.data.user[0].phone);\n      }\n\n      if (response.data.loggedIn === false || response.data.user[0].role !== \"shop\") {\n        return history.push(\"/login\");\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calculatepointpage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calculate-modal\",\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: modalIsOpen,\n        onAfterOpen: afterOpenModal,\n        onRequestClose: closeModal,\n        style: customStyles,\n        contentLabel: \"Example Modal\",\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 100\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: 100\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divcalculate-modal\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"pcalculate-modal\",\n              children: [\"\\u0E44\\u0E14\\u0E49\\u0E23\\u0E31\\u0E1A : \", total_point, \" \\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"buttoncalculate-modal1\",\n                onClick: transferTocustomer,\n                children: \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"buttoncalculate-modal2\",\n                onClick: closeModal,\n                children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n      rel: \"stylesheet\",\n      type: \"text/css\",\n      href: \"//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n      href: \"//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css\",\n      rel: \"stylesheet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navbar navbar-light bg-light justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"buttonblack\",\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-angle-left\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"bl\",\n            children: \"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"div-img-logo2\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"img-logoo\",\n          src: \"/images/logo.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: \"out\",\n      animate: \"in\",\n      exit: \"out\",\n      variants: pageTransition,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calculate-point-shop\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: gotoTopupPage,\n          className: \"buttontop-up\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E15\\u0E34\\u0E21\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"calculate-con\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"h2promotion\",\n            children: \"\\u0E04\\u0E33\\u0E19\\u0E27\\u0E13\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"h1promotion\",\n            children: [\"\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E02\\u0E2D\\u0E07\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32 : \", shoppoint, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              onClick: refresh,\n              className: \"fas fa-sync-alt\",\n              style: {\n                color: \"black\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"from-calculatepointshop\",\n          onSubmit: e => {\n            e.preventDefault();\n            entercode(product_amount);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-input1-calculatepointshopp\",\n            type: \"tel\",\n            placeholder: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E25\\u0E39\\u0E01\\u0E04\\u0E49\\u0E32\",\n            onChange: e => {\n              setdestPhone(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-input2-calculatepointshopp\",\n            type: \"text\",\n            placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\",\n            value: product_code,\n            onChange: e => {\n              setproduct_code(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-input3-calculatepointshopp\",\n            type: \"text\",\n            placeholder: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\",\n            value: product_amount,\n            onChange: e => {\n              setproduct_amount(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"reset\",\n            className: \"btn btn-primary reset-product-amount\",\n            onClick: () => setproduct_amount(1),\n            children: \"\\u0E23\\u0E35\\u0E40\\u0E0B\\u0E47\\u0E15\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button-input-calculatepointshop\",\n            type: \"submit\",\n            children: \"\\u0E15\\u0E01\\u0E25\\u0E07\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"table-wrapper-scroll-y my-custom-scrollbar\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          class: \"table table-bordered table-striped mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"th-table\",\n                scope: \"col\",\n                children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"th-table\",\n                scope: \"col\",\n                children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"th-table\",\n                scope: \"col\",\n                children: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"th-table\",\n                scope: \"col\",\n                children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), productlist.map(post => {\n            return /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td-table\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: post.product_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td-table\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    price: post.price,\n                    children: post.price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td-table\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: post.number\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td-table\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"button-delete-item\",\n                    name: post.id,\n                    onClick: e => {\n                      deleteproduct(e);\n                      updateprice(post.price * post.number);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"far fa-times-circle\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 390,\n                      columnNumber: 25\n                    }, this), \" \\u0E25\\u0E1A\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E19\\u0E35\\u0E49\", \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"far fa-times-circle\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 391,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: promotionlist.map(promotion => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  name: promotion.id,\n                  children: [\"\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E19 : \", promotion.product_name, \" x\", \" \", promotion.number]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"div-total-price\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"h3-total-price\",\n          children: [\"\\u0E23\\u0E32\\u0E04\\u0E32\\u0E23\\u0E27\\u0E21 : \", total_price, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-total-price\",\n          onClick: calculatepoint,\n          children: \"\\u0E04\\u0E34\\u0E14\\u0E40\\u0E07\\u0E34\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Calculatepointshop, \"jHqoUqjkH2DYhza/uWkPRSr0bVA=\", false, function () {\n  return [useHistory];\n});\n\n_c = Calculatepointshop;\nexport default Calculatepointshop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calculatepointshop\");","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Calculatepointshop.js"],"names":["React","useState","Link","useHistory","useEffect","axios","Modal","motion","customStyles","content","width","height","top","left","right","bottom","marginRight","transform","Calculatepointshop","modalIsOpen","setIsOpen","openModal","afterOpenModal","closeModal","history","product_code","setproduct_code","productlist","setProductlist","promotionlist","setPromotionlist","total_price","setTotal_Price","id","setId","shoppoint","setShopPoint","phone","setPhone","destPhone","setdestPhone","total_point","setTotal_Point","product_amount","setproduct_amount","refresh","get","window","location","reload","entercode","number","a","post","then","response","data","length","product_name","price","result2","result1","amount_point","transferTocustomer","list","alert","go","calculate","message","calculatepoint","promotionpoint","i","Math","floor","deleteproduct","e","target","getAttribute","filter","JSON","stringify","updateprice","gotoTopupPage","push","pageTransition","in","opacity","x","out","loggedIn","user","role","y","color","preventDefault","value","map","promotion","display"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Modal from \"react-modal\";\r\nimport \"./Calculatepointshop.css\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst customStyles = {\r\n  content: {\r\n    width: \"100%\",\r\n    height: \"50%\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n  },\r\n};\r\n\r\nfunction Calculatepointshop() {\r\n  const [modalIsOpen, setIsOpen] = React.useState(false);\r\n\r\n  function openModal() {\r\n    setIsOpen(true);\r\n  }\r\n\r\n  function afterOpenModal() {\r\n    // references are now sync'd and can be accessed.\r\n  }\r\n\r\n  function closeModal() {\r\n    setIsOpen(false);\r\n  }\r\n\r\n  //-----------------------------------------------------\r\n  const history = useHistory();\r\n  //-----------------------------------------------------\r\n  const [product_code, setproduct_code] = useState(\"\");\r\n  const [productlist, setProductlist] = useState([]);\r\n  const [promotionlist, setPromotionlist] = useState([]);\r\n  const [total_price, setTotal_Price] = useState(0);\r\n  const [id, setId] = useState();\r\n  const [shoppoint, setShopPoint] = useState();\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [destPhone, setdestPhone] = useState(\"\");\r\n  const [total_point, setTotal_Point] = useState(0);\r\n  const [product_amount, setproduct_amount] = useState(1);\r\n\r\n  const refresh = () => {\r\n    axios.get(\"/shop\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const entercode = (number) => {\r\n    var a;\r\n    if (!product_code) {\r\n    } else {\r\n      axios\r\n        .post(\"/enterproductcode\", {\r\n          product_code: product_code,\r\n        })\r\n        .then((response) => {\r\n          if (response.data.productlist) {\r\n            for (a = 0; a < `${productlist.length}`; a++) {\r\n              if (productlist[a].product_code === product_code) {\r\n                productlist[a].number += number;\r\n              } else {\r\n                setProductlist([\r\n                  ...productlist,\r\n                  {\r\n                    id: a,\r\n                    product_name: response.data.productlist[0].product_name,\r\n                    product_code: response.data.productlist[0].product_code,\r\n                    price: response.data.productlist[0].price,\r\n                    number: number,\r\n                  },\r\n                ]);\r\n              }\r\n            }\r\n            /*setProductlist([\r\n              ...productlist,\r\n              {\r\n                id: a,\r\n                product_name: response.data.productlist[0].product_name,\r\n                product_code: response.data.productlist[0].product_code,\r\n                price: response.data.productlist[0].price,\r\n                number: number,\r\n              },\r\n            ]);*/\r\n            setTotal_Price(\r\n              total_price + response.data.productlist[0].price * number\r\n            );\r\n          } else if (response.data.result2) {\r\n            for (a = 0; a < `${productlist.length}`; a++) {}\r\n            setProductlist([\r\n              ...productlist,\r\n              {\r\n                id: a,\r\n                product_name: response.data.result1[0].product_name,\r\n                product_code: response.data.result1[0].product_code,\r\n                price: response.data.result1[0].price,\r\n                number: number,\r\n              },\r\n            ]);\r\n            setPromotionlist([\r\n              ...promotionlist,\r\n              {\r\n                id: a,\r\n                product_name: response.data.result1[0].product_name,\r\n                product_code: response.data.result1[0].product_code,\r\n                price: response.data.result1[0].price,\r\n                amount_point: response.data.result2.amount_point,\r\n                number: number,\r\n              },\r\n            ]);\r\n            setTotal_Price(\r\n              total_price + response.data.result1[0].price * number\r\n            );\r\n          }\r\n        });\r\n      setproduct_code(\"\");\r\n    }\r\n  };\r\n\r\n  const transferTocustomer = () => {\r\n    if (!destPhone) {\r\n      axios.post(\"/transaction/buying\", {\r\n        list: productlist,\r\n        destPhone: destPhone,\r\n      });\r\n      alert(\"success\");\r\n      history.go();\r\n    } else {\r\n      if (shoppoint < total_point) {\r\n        alert(\"คะแนนร้านค้าไม่เพียงพอ กรุณาเติมคะแนน\");\r\n      } else {\r\n        axios\r\n          .post(\"/calculateprice\", {\r\n            total_point: total_point,\r\n            destPhone: destPhone,\r\n          })\r\n          .then((response) => {\r\n            if (response.data.calculate) {\r\n              axios.post(\"/transaction/buying\", {\r\n                list: productlist,\r\n                destPhone: destPhone,\r\n              });\r\n              alert(response.data.calculate);\r\n              axios.get(\"/shop\");\r\n              history.go();\r\n            } else {\r\n              alert(response.data.message);\r\n            }\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  const calculatepoint = () => {\r\n    var promotionpoint = 0;\r\n    for (let i = 0; i < `${promotionlist.length}`; i++) {\r\n      promotionpoint +=\r\n        (promotionlist[i].amount_point -\r\n          Math.floor(promotionlist[i].price / 50)) *\r\n        promotionlist[i].number;\r\n    }\r\n    setTotal_Point(Math.floor(total_price / 50) + promotionpoint);\r\n    if (productlist.length === 0) {\r\n    } else {\r\n      openModal();\r\n    }\r\n  };\r\n\r\n  const deleteproduct = (e) => {\r\n    const id = e.target.getAttribute(\"name\");\r\n    setProductlist(\r\n      productlist.filter((productlist) => JSON.stringify(productlist.id) !== id)\r\n    );\r\n    setPromotionlist(\r\n      promotionlist.filter(\r\n        (promotionlist) => JSON.stringify(promotionlist.id) !== id\r\n      )\r\n    );\r\n  };\r\n\r\n  const updateprice = (price) => {\r\n    setTotal_Price(total_price - price);\r\n  };\r\n\r\n  const gotoTopupPage = () => {\r\n    history.push(\"/top-up-point-shop\");\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n    },\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/login\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        setId(response.data.user[0].id);\r\n        setShopPoint(response.data.user[0].shoppoint);\r\n        setPhone(response.data.user[0].phone);\r\n      }\r\n      if (\r\n        response.data.loggedIn === false ||\r\n        response.data.user[0].role !== \"shop\"\r\n      ) {\r\n        return history.push(\"/login\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"calculatepointpage\">\r\n      <div className=\"calculate-modal\">\r\n        <Modal\r\n          isOpen={modalIsOpen}\r\n          onAfterOpen={afterOpenModal}\r\n          onRequestClose={closeModal}\r\n          style={customStyles}\r\n          contentLabel=\"Example Modal\"\r\n        >\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 100 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 100 }}\r\n          >\r\n            <div className=\"divcalculate-modal\">\r\n              <h2 className=\"pcalculate-modal\">ได้รับ : {total_point} คะแนน</h2>\r\n              <div>\r\n                <button\r\n                  className=\"buttoncalculate-modal1\"\r\n                  onClick={transferTocustomer}\r\n                >\r\n                  ยืนยัน\r\n                </button>\r\n                <button className=\"buttoncalculate-modal2\" onClick={closeModal}>\r\n                  ยกเลิก\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </Modal>\r\n      </div>\r\n      <link\r\n        rel=\"stylesheet\"\r\n        type=\"text/css\"\r\n        href=\"//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css\"\r\n      />\r\n      <link\r\n        href=\"//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css\"\r\n        rel=\"stylesheet\"\r\n      ></link>\r\n\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <div className=\"calculate-point-shop\">\r\n          <button onClick={gotoTopupPage} className=\"buttontop-up\">\r\n            <i className=\"fas fa-plus\"></i>\r\n            เติมคะแนน\r\n          </button>\r\n\r\n          <div className=\"calculate-con\">\r\n            <h2 className=\"h2promotion\">คำนวณคะแนน</h2>\r\n            <h1 className=\"h1promotion\">\r\n              คะแนนของร้านค้า : {shoppoint}{\" \"}\r\n              <i\r\n                onClick={refresh}\r\n                className=\"fas fa-sync-alt\"\r\n                style={{ color: \"black\" }}\r\n              />\r\n            </h1>\r\n          </div>\r\n\r\n          <form\r\n            className=\"from-calculatepointshop\"\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              entercode(product_amount);\r\n            }}\r\n          >\r\n            <input\r\n              className=\"input-input1-calculatepointshopp\"\r\n              type=\"tel\"\r\n              placeholder=\"เบอร์โทรลูกค้า\"\r\n              onChange={(e) => {\r\n                setdestPhone(e.target.value);\r\n              }}\r\n            />\r\n            <input\r\n              className=\"input-input2-calculatepointshopp\"\r\n              type=\"text\"\r\n              placeholder=\"รหัสสินค้า\"\r\n              value={product_code}\r\n              onChange={(e) => {\r\n                setproduct_code(e.target.value);\r\n              }}\r\n            />\r\n            <input\r\n              className=\"input-input3-calculatepointshopp\"\r\n              type=\"text\"\r\n              placeholder=\"จำนวน\"\r\n              value={product_amount}\r\n              onChange={(e) => {\r\n                setproduct_amount(e.target.value);\r\n              }}\r\n            />\r\n            <button\r\n              type=\"reset\"\r\n              className=\"btn btn-primary reset-product-amount\"\r\n              onClick={() => setproduct_amount(1)}\r\n            >\r\n              รีเซ็ตจำนวน\r\n            </button>\r\n            <button className=\"button-input-calculatepointshop\" type=\"submit\">\r\n              ตกลง\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <div class=\"table-wrapper-scroll-y my-custom-scrollbar\">\r\n          <table class=\"table table-bordered table-striped mb-0\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"th-table\" scope=\"col\">\r\n                  รายการสินค้า\r\n                </th>\r\n                <th className=\"th-table\" scope=\"col\">\r\n                  ราคา\r\n                </th>\r\n                <th className=\"th-table\" scope=\"col\">\r\n                  จำนวน\r\n                </th>\r\n                <th className=\"th-table\" scope=\"col\">\r\n                  ตัวเลือก\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            {productlist.map((post) => {\r\n              return (\r\n                <tbody>\r\n                  <tr>\r\n                    <td className=\"td-table\">\r\n                      <p>{post.product_name}</p>\r\n                    </td>\r\n                    <td className=\"td-table\">\r\n                      <p price={post.price}>{post.price}</p>\r\n                    </td>\r\n                    <td className=\"td-table\">\r\n                      <p>{post.number}</p>\r\n                    </td>\r\n                    <td className=\"td-table\">\r\n                      <button\r\n                        className=\"button-delete-item\"\r\n                        name={post.id}\r\n                        onClick={(e) => {\r\n                          deleteproduct(e);\r\n                          updateprice(post.price * post.number);\r\n                        }}\r\n                      >\r\n                        <i className=\"far fa-times-circle\"></i> ลบรายการนี้{\" \"}\r\n                        <i className=\"far fa-times-circle\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              );\r\n            })}\r\n            <tr>\r\n              {promotionlist.map((promotion) => {\r\n                return (\r\n                  <div style={{ display: \"flex\" }}>\r\n                    <p name={promotion.id}>\r\n                      สินค้าโปรโมชัน : {promotion.product_name} x{\" \"}\r\n                      {promotion.number}\r\n                    </p>\r\n                  </div>\r\n                );\r\n              })}\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        <div className=\"div-total-price\">\r\n          <h3 className=\"h3-total-price\">ราคารวม : {total_price} </h3>\r\n          <button className=\"button-total-price\" onClick={calculatepoint}>\r\n            คิดเงิน\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Calculatepointshop;\r\n"]},"metadata":{},"sourceType":"module"}