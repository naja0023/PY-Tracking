{"ast":null,"code":"import _defineProperty from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import axios from\"axios\";import\"./Topuppointshop.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Topuppointshop(){var _jsx2;var history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var admin=\"admin\";var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),amount=_useState6[0],setAmount=_useState6[1];var topuppoint=function topuppoint(){if(amount<1||!amount){alert(\"คะแนนไม่ถูกต้อง\");}else{axios.post(\"/shop/topup\",{id:id,phone:phone,transferer:admin,amount:amount}).then(function(response){if(response){alert(response.data);axios.get(\"/shop\");history.goBack();}});}};useEffect(function(){axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){setId(response.data.user[0].id);setPhone(response.data.user[0].phone);}if(response.data.loggedIn===false||response.data.user[0].role!==\"shop\"){return history.push(\"/login\");}});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"topup-page\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/calculate-point-shop\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"topuppoint\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"topuppoint-up\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h1topupoint\",children:\"\\u0E40\\u0E15\\u0E34\\u0E21\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox-topupoint\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labeltopupoint\",children:\"\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23 (\\u0E40\\u0E07\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E44\\u0E02\\u0E40\\u0E15\\u0E34\\u0E21\\u0E44\\u0E14\\u0E49\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E25\\u0E30 1000)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-topupoint\",type:\"number\",placeholder:\"\\u0E01\\u0E23\\u0E2D\\u0E01\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E30\\u0E41\\u0E19\\u0E19\",onChange:function onChange(e){setAmount(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"div-button-topupoint\",children:/*#__PURE__*/_jsx(\"button\",(_jsx2={className:\"submit\"},_defineProperty(_jsx2,\"className\",\"button-topupoint\"),_defineProperty(_jsx2,\"onClick\",topuppoint),_defineProperty(_jsx2,\"children\",\"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"),_jsx2))})]})})]});}export default Topuppointshop;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Topuppointshop.js"],"names":["React","useState","useEffect","Link","useHistory","axios","Topuppointshop","history","id","setId","phone","setPhone","admin","amount","setAmount","topuppoint","alert","post","transferer","then","response","data","get","goBack","loggedIn","user","role","push","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./Topuppointshop.css\";\r\n\r\nfunction Topuppointshop() {\r\n  const history = useHistory();\r\n  const [id, setId] = useState();\r\n  const [phone, setPhone] = useState(\"\");\r\n  const admin = \"admin\";\r\n  const [amount, setAmount] = useState();\r\n\r\n  const topuppoint = () => {\r\n    if (amount < 1 || !amount) {\r\n      alert(\"คะแนนไม่ถูกต้อง\");\r\n    } else {\r\n      axios\r\n        .post(\"/shop/topup\", {\r\n          id: id,\r\n          phone: phone,\r\n          transferer: admin,\r\n          amount: amount,\r\n        })\r\n        .then((response) => {\r\n          if (response) {\r\n            alert(response.data);\r\n            axios.get(\"/shop\");\r\n            history.goBack();\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/login\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        setId(response.data.user[0].id);\r\n        setPhone(response.data.user[0].phone);\r\n      }\r\n      if (\r\n        response.data.loggedIn === false ||\r\n        response.data.user[0].role !== \"shop\"\r\n      ) {\r\n        return history.push(\"/login\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"topup-page\">\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/calculate-point-shop\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n      </nav>\r\n      <div className=\"topuppoint\">\r\n        <div className=\"topuppoint-up\">\r\n          <h2 className=\"h1topupoint\">เติมคะแนน</h2>\r\n          <div className=\"textbox-topupoint\">\r\n            <label className=\"labeltopupoint\">\r\n              กรอกจำนวนคะแนนที่ต้องการ (เงื่อนไขเติมได้ครั้งละ 1000)\r\n            </label>\r\n            <input\r\n              className=\"input-topupoint\"\r\n              type=\"number\"\r\n              placeholder=\"กรอกจำนวนคะแนน\"\r\n              onChange={(e) => {\r\n                setAmount(e.target.value);\r\n              }}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"div-button-topupoint\">\r\n          <button\r\n            className=\"submit\"\r\n            className=\"button-topupoint\"\r\n            onClick={topuppoint}\r\n          >\r\n            ยืนยัน\r\n          </button></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Topuppointshop;\r\n"]},"metadata":{},"sourceType":"module"}