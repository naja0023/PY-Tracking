{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import{useHistory}from\"react-router\";import{useEffect}from\"react\";import axios from\"axios\";import\"./Promotion.css\";import{Loader}from\"semantic-ui-react\";import{motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Promotion(){//-----------------------------------------------------\nvar history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),shoplist=_useState2[0],setShoplist=_useState2[1];var _useState3=useState(shoplist),_useState4=_slicedToArray(_useState3,2),filteredShop=_useState4[0],setFilteredShop=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),active=_useState6[0],setactive=_useState6[1];//loader\n//--------------search shop --------------//\nvar shopSearch=function shopSearch(event){var value=event.toLowerCase();var result=[];result=shoplist.filter(function(data){return data.shop_name.search(value)!=-1;});setFilteredShop(result);};//-----------------------------------------------\nvar getpromotion=function getpromotion(shopname){history.push(\"/promotiondetails/\"+shopname);};/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:100}};/* ********************************** */useEffect(function(){var timer=setTimeout(function(){setactive(false);axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){}if(response.data.loggedIn===false||response.data.user[0].role!==\"member\"){return history.push(\"/login\");}});axios.get(\"/getshoplistpromotion\").then(function(response){if(response){setShoplist(response.data);setFilteredShop(response.data);}});},500);return function(){return clearTimeout(timer);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"link\",{href:\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\",rel:\"stylesheet\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toppic-promotin\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"h2promotionmember\",children:\"\\u0E42\\u0E1B\\u0E23\\u0E42\\u0E21\\u0E0A\\u0E31\\u0E48\\u0E19\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"divinsearch-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"insearch-divinsearch\",type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\",onChange:function onChange(event){return shopSearch(event.target.value);}}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})]}),/*#__PURE__*/_jsxs(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:[/*#__PURE__*/_jsx(Loader,{active:active}),/*#__PURE__*/_jsx(\"div\",{className:\"top-promotion\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-promotion\",children:filteredShop.map(function(val){return/*#__PURE__*/_jsxs(\"div\",{className:\"shopbox-promotin\",onClick:function onClick(){getpromotion(val.shop_name);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"divimg-promotin\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-promotin\",src:\"images/shop.png\",style:{height:\"100px\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"boxpromotion\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"p-promotin\",children:[\"\\u0E23\\u0E49\\u0E32\\u0E19 : \",val.shop_name]})})]});})})})]})]});}export default Promotion;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Promotion.js"],"names":["React","useState","Link","useHistory","useEffect","axios","Loader","motion","Promotion","history","shoplist","setShoplist","filteredShop","setFilteredShop","active","setactive","shopSearch","event","value","toLowerCase","result","filter","data","shop_name","search","getpromotion","shopname","push","pageTransition","in","opacity","x","out","timer","setTimeout","get","then","response","loggedIn","user","role","clearTimeout","target","map","val","height"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Promotion.css\";\r\nimport { Loader } from \"semantic-ui-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction Promotion() {\r\n  //-----------------------------------------------------\r\n  const history = useHistory();\r\n  const [shoplist, setShoplist] = useState([]);\r\n  const [filteredShop, setFilteredShop] = useState(shoplist);\r\n  const [active, setactive] = useState(true); //loader\r\n\r\n  //--------------search shop --------------//\r\n  const shopSearch = (event) => {\r\n    let value = event.toLowerCase();\r\n    let result = [];\r\n    result = shoplist.filter((data) => {\r\n      return data.shop_name.search(value) != -1;\r\n    });\r\n    setFilteredShop(result);\r\n  };\r\n  //-----------------------------------------------\r\n\r\n  const getpromotion = (shopname) => {\r\n    history.push(\"/promotiondetails/\" + shopname);\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n    },\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setactive(false);\r\n      axios.get(\"/login\").then((response) => {\r\n        if (response.data.loggedIn === true) {\r\n        }\r\n        if (\r\n          response.data.loggedIn === false ||\r\n          response.data.user[0].role !== \"member\"\r\n        ) {\r\n          return history.push(\"/login\");\r\n        }\r\n      });\r\n      axios.get(\"/getshoplistpromotion\").then((response) => {\r\n        if (response) {\r\n          setShoplist(response.data);\r\n          setFilteredShop(response.data);\r\n        }\r\n      });\r\n    }, 500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <link\r\n        href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\"\r\n        rel=\"stylesheet\"\r\n      />\r\n\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <div className=\"toppic-promotin\">\r\n        <h2 className=\"h2promotionmember\">โปรโมชั่นร้านค้า</h2>\r\n      </div>\r\n      <div className=\"divinsearch-1\">\r\n        <input\r\n          className=\"insearch-divinsearch\"\r\n          type=\"text\"\r\n          placeholder=\"ค้นหาร้านค้า\"\r\n          onChange={(event) => shopSearch(event.target.value)}\r\n        />\r\n        <i className=\"fas fa-search\"></i>\r\n      </div>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <Loader active={active} />\r\n        <div className=\"top-promotion\">\r\n          <div className=\"container-promotion\">\r\n            {filteredShop.map((val) => {\r\n              return (\r\n                <div\r\n                  className=\"shopbox-promotin\"\r\n                  onClick={() => {\r\n                    getpromotion(val.shop_name);\r\n                  }}\r\n                >\r\n                  <div className=\"divimg-promotin\">\r\n                    <img className=\"img-promotin\" src=\"images/shop.png\" style={{height : \"100px\"}}></img>\r\n                  </div>\r\n                  <div className=\"boxpromotion\">\r\n                    <p className=\"p-promotin\">ร้าน : {val.shop_name}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Promotion;\r\n"]},"metadata":{},"sourceType":"module"}