{"ast":null,"code":"import _slicedToArray from\"D:/login_and_register - Copy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{Link}from\"react-router-dom\";import\"./Addstock.css\";import{motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Addstock(){//-----------------------------------------------\nvar history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),product_name=_useState4[0],setProductName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),product_code=_useState6[0],setProductCode=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),statusUpload=_useState12[0],setStatusUpload=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),file=_useState14[0],setFile=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),UploadFile=_useState16[0],setUploadFile=_useState16[1];//-----------------------------------------------\nvar addproductstock=function addproductstock(){if(!product_name||!product_code||!price||!file||!category){setStatusUpload(\"กรุณาใส่ข้อมูลให้ครบทุกช่อง\");}else if(file.size>2097152){setStatusUpload(\"ไฟล์ภาพมีขนาดเกิน 2 MB\");}else{setStatusUpload(\"\");var formData=new FormData();formData.append(\"file\",file);axios.post(\"/addproductstock\",{shop_name:name,product_name:product_name,product_code:product_code,price:price,picture:\"/upload/\"+file.name,category:category}).then(function(response){if(response.data.message){alert(response.data.message);}else if(response.data.success){alert(response.data.success);history.go();}});axios.post(\"/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){if(response){var _response$data=response.data,fileName=_response$data.fileName,filePath=_response$data.filePath;setUploadFile({fileName:fileName,filePath:filePath});}});}};/* ********************************** */var pageTransition={in:{opacity:1,x:0},out:{opacity:0,x:100}};/* ********************************** */useEffect(function(){axios.get(\"/login\").then(function(response){if(response.data.loggedIn===true){setName(response.data.user[0].name);}if(response.data.loggedIn===false||response.data.user[0].role!==\"shop\"){return history.push(\"/login\");}});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Addstockpage\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{className:\"buttonblack\",to:\"/product-stockpage\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-angle-left\",children:/*#__PURE__*/_jsx(\"a\",{className:\"bl\",children:\"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"div-img-logo2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-logoo\",src:\"/images/logo.png\"})})]}),/*#__PURE__*/_jsx(motion.div,{initial:\"out\",animate:\"in\",exit:\"out\",variants:pageTransition,children:/*#__PURE__*/_jsx(\"div\",{className:\"addstock-page-con\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"addstock-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-addstock\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"title-addstock\",children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"})}),/*#__PURE__*/_jsx(\"label\",{className:\"form-addstock-name\",children:\"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form2-addstock\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-addstock-name\",onChange:function onChange(e){return setProductName(e.target.value);}})}),/*#__PURE__*/_jsx(\"label\",{className:\"form-addstock-name\",children:\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form2-addstock\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-addstock-name\",onChange:function onChange(e){return setProductCode(e.target.value);}})}),/*#__PURE__*/_jsx(\"label\",{className:\"form-addstock-name\",children:\"\\u0E23\\u0E32\\u0E04\\u0E32\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form2-addstock\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-addstock-name\",onChange:function onChange(e){return setPrice(e.target.value);}})}),/*#__PURE__*/_jsx(\"label\",{className:\"form-addstock-name\",children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E23\\u0E39\\u0E1B\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-addstock-name1\",type:\"file\",onChange:function onChange(e){setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"p\",{className:\"p-input-add-stock\",children:\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-add-stock\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-add-stock\",type:\"radio\",id:\"normal\",name:\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\",value:\"\\u0E17\\u0E31\\u0E48\\u0E27\\u0E44\\u0E1B\",onChange:function onChange(e){setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"label-input-add-stock\",for:\"normal\",children:\"\\u0E17\\u0E31\\u0E48\\u0E27\\u0E44\\u0E1B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-add-stock\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-add-stock\",type:\"radio\",id:\"food\",name:\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\",value:\"\\u0E2D\\u0E32\\u0E2B\\u0E32\\u0E23\",onChange:function onChange(e){setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"label-input-add-stock\",for:\"food\",children:\"\\u0E2D\\u0E32\\u0E2B\\u0E32\\u0E23\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-add-stock\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-add-stock\",type:\"radio\",id:\"drink\",name:\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\",value:\"\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E14\\u0E37\\u0E48\\u0E21\",onChange:function onChange(e){setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"label-input-add-stock\",for:\"drink\",children:\"\\u0E40\\u0E04\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\\u0E14\\u0E37\\u0E48\\u0E21\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-add-stock\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-add-stock\",type:\"radio\",id:\"health\",name:\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\",value:\"\\u0E2A\\u0E38\\u0E02\\u0E20\\u0E32\\u0E1E/\\u0E04\\u0E27\\u0E32\\u0E21\\u0E07\\u0E32\\u0E21\",onChange:function onChange(e){setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"label-input-add-stock\",for:\"health\",children:\"\\u0E2A\\u0E38\\u0E02\\u0E20\\u0E32\\u0E1E/\\u0E04\\u0E27\\u0E32\\u0E21\\u0E07\\u0E32\\u0E21\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-add-stock\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-add-stock\",type:\"radio\",id:\"clothes\",name:\"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\",value:\"\\u0E40\\u0E2A\\u0E37\\u0E49\\u0E2D\\u0E1C\\u0E49\\u0E32\",onChange:function onChange(e){setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"label-input-add-stock\",for:\"clothes\",children:\"\\u0E40\\u0E2A\\u0E37\\u0E49\\u0E2D\\u0E1C\\u0E49\\u0E32\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"p-button-addstock\",children:statusUpload}),/*#__PURE__*/_jsx(\"div\",{className:\"divbutton-addstock\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button-addstock\",onClick:addproductstock,children:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"})})]})})})]});}export default Addstock;","map":{"version":3,"sources":["D:/login_and_register - Copy/client/src/components/Addstock.js"],"names":["axios","React","useState","useEffect","useHistory","Link","motion","Addstock","history","name","setName","product_name","setProductName","product_code","setProductCode","price","setPrice","category","setCategory","statusUpload","setStatusUpload","file","setFile","UploadFile","setUploadFile","addproductstock","size","formData","FormData","append","post","shop_name","picture","then","response","data","message","alert","success","go","headers","fileName","filePath","pageTransition","in","opacity","x","out","get","loggedIn","user","role","push","e","target","value","files"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Addstock.css\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction Addstock() {\r\n  //-----------------------------------------------\r\n  const history = useHistory();\r\n  const [name, setName] = useState(\"\");\r\n  const [product_name, setProductName] = useState(\"\");\r\n  const [product_code, setProductCode] = useState(\"\");\r\n  const [price, setPrice] = useState();\r\n  const [category, setCategory] = useState(\"\");\r\n\r\n  const [statusUpload, setStatusUpload] = useState(\"\");\r\n\r\n  const [file, setFile] = useState(\"\");\r\n  const [UploadFile, setUploadFile] = useState(\"\");\r\n  //-----------------------------------------------\r\n  const addproductstock = () => {\r\n    if (!product_name || !product_code || !price || !file || !category) {\r\n      setStatusUpload(\"กรุณาใส่ข้อมูลให้ครบทุกช่อง\");\r\n    } else if (file.size > 2097152) {\r\n      setStatusUpload(\"ไฟล์ภาพมีขนาดเกิน 2 MB\");\r\n    } else {\r\n      setStatusUpload(\"\");\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n      axios\r\n        .post(\"/addproductstock\", {\r\n          shop_name: name,\r\n          product_name: product_name,\r\n          product_code: product_code,\r\n          price: price,\r\n          picture: \"/upload/\" + file.name,\r\n          category: category,\r\n        })\r\n        .then((response) => {\r\n          if (response.data.message) {\r\n            alert(response.data.message);\r\n          } else if (response.data.success) {\r\n            alert(response.data.success);\r\n            history.go();\r\n          }\r\n        });\r\n\r\n      axios\r\n        .post(\"/upload\", formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        })\r\n        .then((response) => {\r\n          if (response) {\r\n            const { fileName, filePath } = response.data;\r\n            setUploadFile({ fileName, filePath });\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  const pageTransition = {\r\n    in: {\r\n      opacity: 1,\r\n      x: 0,\r\n    },\r\n    out: {\r\n      opacity: 0,\r\n      x: 100,\r\n    },\r\n  };\r\n\r\n  /* ********************************** */\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/login\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        setName(response.data.user[0].name);\r\n      }\r\n      if (\r\n        response.data.loggedIn === false ||\r\n        response.data.user[0].role !== \"shop\"\r\n      ) {\r\n        return history.push(\"/login\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Addstockpage\">\r\n      <nav className=\"navbar navbar-light bg-light justify-content-between\">\r\n        <Link className=\"buttonblack\" to=\"/product-stockpage\">\r\n          <i className=\"fas fa-angle-left\">\r\n            <a className=\"bl\">ย้อนกลับ</a>\r\n          </i>\r\n        </Link>\r\n        <div className=\"div-img-logo2\">\r\n          <img className=\"img-logoo\" src=\"/images/logo.png\" />\r\n        </div>\r\n      </nav>\r\n\r\n      <motion.div\r\n        initial=\"out\"\r\n        animate=\"in\"\r\n        exit=\"out\"\r\n        variants={pageTransition}\r\n      >\r\n        <div className=\"addstock-page-con\">\r\n          <div className=\"addstock-container\">\r\n            <div className=\"form-addstock\">\r\n              <h4 className=\"title-addstock\">เพิ่มสินค้า</h4>\r\n            </div>\r\n            <label className=\"form-addstock-name\">ชื่อสินค้า</label>\r\n\r\n            <div className=\"form2-addstock\">\r\n              <input\r\n                className=\"input-addstock-name\"\r\n                onChange={(e) => setProductName(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <label className=\"form-addstock-name\">รหัสสินค้า</label>\r\n            <div className=\"form2-addstock\">\r\n              <input\r\n                className=\"input-addstock-name\"\r\n                onChange={(e) => setProductCode(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <label className=\"form-addstock-name\">ราคาสินค้า</label>\r\n            <div className=\"form2-addstock\">\r\n              <input\r\n                className=\"input-addstock-name\"\r\n                onChange={(e) => setPrice(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <label className=\"form-addstock-name\">เพิ่มรูปสินค้า</label>\r\n\r\n            <input\r\n              className=\"input-addstock-name1\"\r\n              type=\"file\"\r\n              onChange={(e) => {\r\n                setFile(e.target.files[0]);\r\n              }}\r\n            />\r\n            <p className=\"p-input-add-stock\">หมวดหมู่</p>\r\n            {/**----------------------------------------------------------------------------- */}\r\n            <div className=\"div-add-stock\">\r\n              <input\r\n                className=\"input-add-stock\"\r\n                type=\"radio\"\r\n                id=\"normal\"\r\n                name=\"หมวดหมู่\"\r\n                value=\"ทั่วไป\"\r\n                onChange={(e) => {\r\n                  setCategory(e.target.value);\r\n                }}\r\n              />\r\n              <label className=\"label-input-add-stock\" for=\"normal\">\r\n                ทั่วไป\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"div-add-stock\">\r\n              <input\r\n                className=\"input-add-stock\"\r\n                type=\"radio\"\r\n                id=\"food\"\r\n                name=\"หมวดหมู่\"\r\n                value=\"อาหาร\"\r\n                onChange={(e) => {\r\n                  setCategory(e.target.value);\r\n                }}\r\n              />\r\n              <label className=\"label-input-add-stock\" for=\"food\">\r\n                อาหาร\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"div-add-stock\">\r\n              <input\r\n                className=\"input-add-stock\"\r\n                type=\"radio\"\r\n                id=\"drink\"\r\n                name=\"หมวดหมู่\"\r\n                value=\"เครื่องดื่ม\"\r\n                onChange={(e) => {\r\n                  setCategory(e.target.value);\r\n                }}\r\n              />\r\n              <label className=\"label-input-add-stock\" for=\"drink\">\r\n                เครื่องดื่ม\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"div-add-stock\">\r\n              <input\r\n                className=\"input-add-stock\"\r\n                type=\"radio\"\r\n                id=\"health\"\r\n                name=\"หมวดหมู่\"\r\n                value=\"สุขภาพ/ความงาม\"\r\n                onChange={(e) => {\r\n                  setCategory(e.target.value);\r\n                }}\r\n              />\r\n              <label className=\"label-input-add-stock\" for=\"health\">\r\n                สุขภาพ/ความงาม\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"div-add-stock\">\r\n              <input\r\n                className=\"input-add-stock\"\r\n                type=\"radio\"\r\n                id=\"clothes\"\r\n                name=\"หมวดหมู่\"\r\n                value=\"เสื้อผ้า\"\r\n                onChange={(e) => {\r\n                  setCategory(e.target.value);\r\n                }}\r\n              />\r\n              <label className=\"label-input-add-stock\" for=\"clothes\">\r\n                เสื้อผ้า\r\n              </label>\r\n            </div>\r\n\r\n            <p className=\"p-button-addstock\">{statusUpload}</p>\r\n            <div className=\"divbutton-addstock\">\r\n              <button className=\"button-addstock\" onClick={addproductstock}>\r\n                เพิ่มสินค้า\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\nexport default Addstock;\r\n"]},"metadata":{},"sourceType":"module"}